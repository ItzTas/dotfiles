const MILLENNIUM_IS_CLIENT_MODULE=!1,pluginName="extendium";function InitializePlugins(){var e,t;let n;(e=window.PLUGIN_LIST||(window.PLUGIN_LIST={}))[pluginName]||(e[pluginName]={}),(t=window.MILLENNIUM_PLUGIN_SETTINGS_STORE||(window.MILLENNIUM_PLUGIN_SETTINGS_STORE={}))[pluginName]||(t[pluginName]={}),window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS||(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS={}),function(e){e[e.CallServerMethod=0]="CallServerMethod"}(n||(n={}));let s=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName],o=`Millennium.Internal.IPC.[${pluginName}]`;const a={DropDown:["string","number","boolean"],NumberTextInput:["number"],StringTextInput:["string"],FloatTextInput:["number"],CheckBox:["boolean"],NumberSlider:["number"],FloatSlider:["number"]};s.ignoreProxyFlag=!1;const r=e=>new Proxy(e,{set(e,t,n){if(!(t in e))throw new TypeError(`Property ${String(t)} does not exist on plugin settings`);const r=a[e[t].type],i=e[t]?.range;if(r.includes("number")&&"number"==typeof n&&(i&&(n=function(e,t,n){return Math.max(t,Math.min(n,e))}(n,i[0],i[1])),n||(n=0)),!r.includes(typeof n))throw new TypeError(`Expected ${r.join(" or ")}, got ${typeof n}`);return e[t].value=n,((e,t)=>{s.ignoreProxyFlag||SteamClient.BrowserView.PostMessageToParent(o,JSON.stringify({name:e,value:t}))})(String(t),n),!0},get:(e,t)=>"__raw_get_internals__"===t?e:t in e?e[t].value:void 0});s.DefinePluginSetting=r,s.settingsStore=r({})}InitializePlugins();const __call_server_method__=(e,t)=>Millennium.callServerMethod(pluginName,e,t),__wrapped_callable__=e=>MILLENNIUM_API.callable(__call_server_method__,e);let PluginEntryPointMain=function(){var e=function(e){"use strict";class t{listeners=[];addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}hasListener(e){return this.listeners.includes(e)}hasListeners(){return this.listeners.length>0}addRules(...e){console.error("Not implemented",e)}removeRules(...e){console.error("Not implemented",e)}getRules(...e){console.error("Not implemented",e)}getListenersSnapshot(){return[...this.listeners]}emit(...e){for(const t of this.listeners)t(...e)}}class n{extension;iconUrl;iconUrlListeners=[];title;constructor(e){this.extension=e,this.initIconUrl()}getPopupUrl(){return this.extension.getFileUrl(this.extension.manifest.action?.default_popup)}getPopupDir(){return this.extension.getFileDir(this.extension.manifest.action?.default_popup)}static selectBestIconPath(e,t){const n=window.devicePixelRatio,s=t??16*n,o=Object.keys(e).map(Number).filter(e=>!isNaN(e)).sort((e,t)=>e-t);let a=o.find(e=>e>=s);return void 0===a&&o.length>0&&(a=o[o.length-1]),void 0!==a?e[String(a)]:void 0}getIconUrl(){return this.iconUrl}async setIcon(e){if(void 0!==e.path){if("string"==typeof e.path)this.updateIconUrl(e.path);else if("object"==typeof e.path){const t=n.selectBestIconPath(e.path);this.updateIconUrl(t)}return Promise.resolve()}}updateIconUrl(e){this.iconUrl=this.extension.getFileUrl(e),this.notifyIconUrlListeners()}subscribeToIconUrlChange(e){this.iconUrlListeners.push(e)}unsubscribeFromIconUrlChange(e){this.iconUrlListeners=this.iconUrlListeners.filter(t=>t!==e)}notifyIconUrlListeners(){for(const e of this.iconUrlListeners)e()}initIconUrl(){this.iconUrl=this.getDefaultIconUrl()}getDefaultIconUrl(e){const t=this.extension.manifest.icons??this.extension.manifest.action?.default_icon;if(void 0!==t){if("string"==typeof t)return this.extension.getFileUrl(t);if("object"==typeof t){const s=n.selectBestIconPath(t,e);return void 0!==s&&""!==s?this.extension.getFileUrl(s):void 0}}}getTitle(){return this.title??this.extension.getName()}setTitle(e){this.title=e}initTitle(){this.title=this.getDefaultTitle()}getDefaultTitle(){const e=this.extension.manifest.action?.default_title;return void 0!==e?this.extension.tryGetLocaleMessage(e):this.extension.getName()}onClicked=new t}class s{contexts=[];addContext(e,t,n){this.contexts.push({contextId:e.document.title,contextType:t,documentId:"0",documentOrigin:"",documentUrl:n,frameId:0,incognito:!1,tabId:-1,windowId:-1,popupWindow:e})}async getContexts(e){return Promise.resolve(this.contexts.filter(t=>{if(e.contextTypes&&!e.contextTypes.includes(t.contextType))return!1;if(e.documentUrls&&void 0!==t.documentUrl&&!e.documentUrls.includes(t.documentUrl))return!1;if(void 0!==e.incognito||void 0!==e.contextIds||void 0!==e.tabIds||void 0!==e.windowIds||void 0!==e.documentIds||void 0!==e.frameIds||void 0!==e.documentOrigins)throw new Error("Not implemented");return!0}))}}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,n,s,a,r){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var l,c=s.kind,m="getter"===c?"get":"setter"===c?"set":"value",d=!t&&e?s.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,s.name):{}),p=!1,h=n.length-1;h>=0;h--){var g={};for(var f in s)g[f]="access"===f?{}:s[f];for(var f in s.access)g.access[f]=s.access[f];g.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");r.push(i(e||null))};var y=(0,n[h])("accessor"===c?{get:u.get,set:u.set}:u[m],g);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!==o(y))throw new TypeError("Object expected");(l=i(y.get))&&(u.get=l),(l=i(y.set))&&(u.set=l),(l=i(y.init))&&a.unshift(l)}else(l=i(y))&&("field"===c?a.unshift(l):u[m]=l)}d&&Object.defineProperty(d,s.name,u),p=!0}function r(e,t,n){for(var s=arguments.length>2,o=0;o<t.length;o++)n=s?t[o].call(e,n):t[o].call(e);return s?n:void 0}function i(e){return class extends e{constructor(...e){super(...e),function(e){const t=Object.getPrototypeOf(e),n=function(e){const t=new Set;let n=e;for(;n&&n!==Object.prototype;){const s=Object.getOwnPropertyNames(n);for(const n of s)"function"==typeof e[n]&&"constructor"!==n&&t.add(n);n=Object.getPrototypeOf(n)}return Array.from(t)}(e);for(const s of n)Object.hasOwn(e,s)||Object.defineProperty(e,s,{value:t[s].bind(e),enumerable:!0,writable:!0,configurable:!0})}(this)}}}"function"==typeof SuppressedError&&SuppressedError;let l=(()=>{let e,t,n=[i],s=[];return class{static{t=this}static{const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;a(null,e={value:t},n,{kind:"class",name:t.name,metadata:o},null,s),t=e.value,o&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o}),r(t,s)}messages;#e;defaultLocale;constructor(e){this.#e=e,this.defaultLocale=this.#e.manifest.default_locale}async initLocale(){if(void 0===this.defaultLocale)return;const e=this.getLocaleLanguage();let t;try{t=await this.fetchLocale(e)}catch{const n=navigator.language.split("-")[0]??"";this.#e.logger.log("Locale",`Locale ${e} not found, falling back to short locale (${n})`);try{t=await this.fetchLocale(n)}catch{this.#e.logger.log("Locale",`Locale ${n} not found, falling back to default locale (${this.defaultLocale})`),t=await this.fetchLocale(this.defaultLocale)}}this.messages=JSON.parse(t)}async fetchLocale(e){const t=await fetch(this.#e.getFileUrl(`/_locales/${e}/messages.json`)??"");if(!t.ok)throw new Error(`Failed to fetch locale ${e}`);return t.text()}getMessage(e,t){const n=this.getPredefinedMessage(e);if(void 0!==n)return n;if(void 0===this.messages)throw new Error(`[${this.#e.url}] Locale not initialized, missing manifest.default_locale?`);"string"==typeof t&&(t=[t]);const s=this.messages[e];if(!s)return e;if(!t)return s.message;let o=s.message;const a=s.placeholders??{};for(const[e,t]of Object.entries(a))o=o.replace(`$${e.toUpperCase()}$`,t.content),o=o.replace(`$${e}$`,t.content);for(let e=1;e<=t.length;e++)o=o.replace(`$${e}`,t[e-1]?.toString()??"");return o}async getAcceptLanguages(){return Promise.resolve([...navigator.languages])}async detectLanguage(){return Promise.resolve({language:this.getUILanguageKey(),isReliable:!0,languages:[{language:this.getUILanguageKey(),percentage:100}]})}getPredefinedMessage(e){switch(e){case"@@extension_id":return"1234";case"@@ui_locale":return this.getUILanguageKey();case"@@bidi_dir":return document.body.dir;case"@@bidi_reversed_dir":return"ltr"===document.body.dir?"rtl":"ltr";case"@@bidi_start_edge":return"ltr"===document.body.dir?"left":"right";case"@@bidi_end_edge":return"ltr"===document.body.dir?"right":"left";default:return}}getMSGKey(e){return e.replaceAll(/__MSG_(.+)__/g,"$1")}getUILanguage(){return navigator.language}getUILanguageKey(){return this.getUILanguage().replaceAll("-","_")}getLocaleLanguage(){let e=navigator.language;return["es-419","pt-BR","pt-PT","zh-CN","zh-TW"].includes(e)||(e=e.split("-")[0]??""),e.replaceAll("-","_")}isReady(){return void 0!==this.messages||void 0===this.defaultLocale}},t})();class c{parent;VERBOSE;context;errors=[];extBadgeStyle="";ctxBadgeStyle;constructor(e,t,n){this.parent=e,this.VERBOSE=t,this.context=n,this.ctxBadgeStyle=c.makeStyleFromStr(this.context),this.parent.locale.isReady()&&this.init()}init(){this.extBadgeStyle=c.makeStyleFromStr(this.parent.getName())}log(e,...t){if(this.VERBOSE){const n=`%c[${this.parent.getName()}]%c[${this.context}]%c[${e}]`;console.debug(n,this.extBadgeStyle,this.ctxBadgeStyle,c.makeStyleFromStr(e),...t)}}error(e,...t){this.silentError(e,...t),this.addError(e,...t),this.parent.logger.addError(e,...t)}silentError(e,...t){const n=`%c[${this.parent.getName()}]%c[${this.context}]%c[${e}]`;console.error(n,this.extBadgeStyle,this.ctxBadgeStyle,c.makeStyleFromStr(e),...t)}addError(e,...t){this.errors.push(`[${this.context}][${e}]: ${t.join(" ")}`)}warn(e,...t){const n=`%c[${this.parent.getName()}]%c[${this.context}]%c[${e}]`;console.warn(n,this.extBadgeStyle,this.ctxBadgeStyle,c.makeStyleFromStr(e),...t)}static globalLog(e,...t){const n=`%c[Extendium]%c[${e}]`,s=c.makeStyleFromStr("Extendium"),o=c.makeStyleFromStr(e);console.debug(n,s,o,...t)}static makeStyleFromStr(e){const t=c.colorFromString(e),n=c.getTextColorForBg(t);return c.makeBadgeStyle(t,n)}static makeBadgeStyle(e,t){return[`background: ${e}`,`color: ${t}`,"padding: 1px 4px","border-radius: 3px","font-weight: 600"].join("; ")}static colorFromString(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<6)-t+e.charCodeAt(n),t|=0;let n="#";for(let e=0;e<3;e++)n+=`00${(t>>8*e&255).toString(16)}`.slice(-2);return n}static getTextColorForBg(e){const{r:t,g:n,b:s}=c.hexToRgb(e);return(299*t+587*n+114*s)/1e3>=128?"#000000":"#ffffff"}static hexToRgb(e){const t=e.replace("#",""),n=parseInt(t,16);return{r:n>>16&255,g:n>>8&255,b:255&n}}}class m{extension;onMessage=new t;timeout=3e4;constructor(e){this.extension=e}async sendMessage(e,t,n){const s={id:"12345",url:n??`chrome-extension://12345/${this.extension.manifest.background?.service_worker}`,tab:{id:1,url:n??`chrome-extension://12345/${this.extension.manifest.background?.service_worker}`}},o=this.onMessage.getListenersSnapshot();let a=!1,r=!1;const i=this.extension,l=new Promise(t=>{function n(e){a?i.logger.warn("Runtime","sendResponse called more than once for the same message. Ignoring subsequent calls."):(a=!0,t(e))}if(0===o.length)return i.logger.warn("Runtime","sendMessage: No listeners found for message.",e),void t(void 0);for(const t of o)try{!0===t(e,s,n)?r=!0:a&&i.logger.log("Runtime","Response sent synchronously.")}catch(e){i.logger.error("Runtime","Error in message listener:",e)}a||r?setTimeout(()=>{a||(i.logger.error("Runtime","No response sent for message, Timed out:",e),t(void 0))},this.timeout):t(void 0)});return"function"==typeof t&&l.then(t).catch(e=>{i.logger.error("Runtime","Error processing response for callback:",e);try{t(void 0)}catch(e){i.logger.error("Runtime","Error in responseCallback itself:",e)}}),l}}class d{extension;constructor(e){this.extension=e}hasOptions(){return void 0!==this.getOptionsPageUrl()}getOptionsPageUrl(){return this.extension.manifest.options_ui?.page??this.extension.manifest.options_page}}class u{manifest;url;folderName;metadata;onInstalled=new t;onStorageChanged=new t;action;runtimeEmulator;contexts;locale;logger;options;constructor(e,t,o,a){this.manifest=e,this.url=t,this.folderName=o,this.metadata=a,this.action=new n(this),this.runtimeEmulator=new m(this),this.contexts=new s,this.locale=new l(this),this.logger=new c(this,!0,"Extension"),this.options=new d(this)}async init(){await this.locale.initLocale(),this.logger.init(),this.action.initTitle()}getFileUrl(e){return void 0===e||e.startsWith(this.url)?e:""===e.trim()?this.url:e.startsWith("/")?`${this.url}${e}`:e.startsWith("./")?`${this.url}${e.slice(1)}`:e.startsWith("../")?`${this.url}${e.slice(2)}`:`${this.url}/${e}`}getFileDir(e){if(void 0===e)return this.url;let t=this.getFileUrl(e.split("/").slice(0,-1).join("/"))??this.url;return t.endsWith("/")||(t+="/"),t}getBackgroundUrl(){return this.getFileUrl(this.manifest.background?.service_worker)}getName(){const e=this.manifest.name;return this.tryGetLocaleMessage(e)}getDescription(){const e=this.manifest.description;return void 0!==e?this.tryGetLocaleMessage(e):e}getVersion(){return this.manifest.version}tryGetLocaleMessage(e){return e.startsWith("__MSG_")?this.locale.getMessage(this.locale.getMSGKey(e)):e}}const p="steamRequestID";function h(e,t){return new Proxy(function(){const n=e.join(".");t.error("Chrome",`Chrome API function '${n}()' does not exist.`)},{get(n,s){if("symbol"!=typeof s)return h([...e,s],t)},apply(){const n=e.join(".");t.error("Chrome",`Chrome API function '${n}()' does not exist.`)}})}function g(e,t,n=[]){return new Proxy(e,{get(e,s){if("symbol"==typeof s)return;if(s in e){const o=e[s];return"object"!=typeof o||null===o||Array.isArray(o)?o:g(o,t,[...n,s])}const o=[...n,s].join(".");return t.error("Chrome",`Chrome API property '${o}' does not exist.`),h([...n,s],t)}})}var f,y,_;!function(e){e.Identify="identify",e.Error="error",e.WebkitMessage="webkit_message",e.FrontendResponse="frontend_response"}(f||(f={})),function(e){e.SendMessage="sendMessage",e.GetStorage="getStorage",e.SetStorage="setStorage",e.RemoveStorage="removeStorage",e.ClearStorage="clearStorage",e.OpenOptions="openOptions",e.SteamRequestResponse="steamRequestResponse"}(y||(y={})),function(e){e.Frontend="frontend",e.Webkit="webkit"}(_||(_={}));class v{socket=null;connectionPromise=null;pendingRequests=new Map;hasIdentified=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=2e3;requestTimeout=3e4;constructor(){this.getConnection()}async sendMessage(e,t,n){this.cleanupOldRequests();try{const s=await this.getConnection();return await new Promise((o,a)=>{const r=`${Date.now()}-${Math.random().toString(36).substring(2,9)}`;this.pendingRequests.set(r,{resolve:o,reject:a,timestamp:Date.now()});const i={type:f.WebkitMessage,requestId:r,webkitRequestType:t,content:e,extensionName:n};s.send(JSON.stringify(i)),setTimeout(()=>{this.pendingRequests.has(r)&&(this.pendingRequests.delete(r),a(new Error(`Request timed out for ${n} - ${r}`)),console.error("Request timed out",n,r,e))},this.requestTimeout)})}catch(e){throw e instanceof Error?e:new Error("Failed to send message")}}async getConnection(){if(this.socket&&this.socket.readyState===WebSocket.OPEN)return this.socket;if(this.connectionPromise)return this.connectionPromise;const e=performance.mark("[Extendium] WebSocketClient getConnection start");return this.connectionPromise=new Promise((t,n)=>{try{this.socket=new WebSocket("ws://127.0.0.1:8791"),this.socket.onopen=()=>{this.reconnectAttempts=0,this.socket?(this.identify(),t(this.socket)):n(new Error("Socket is null after connection")),this.connectionPromise=null;const s=performance.mark("[Extendium] WebSocketClient getConnection end");performance.measure("[Extendium] WebSocketClient getConnection",e.name,s.name)},this.socket.onerror=e=>{console.error("WebSocket error:",e),this.connectionPromise=null,this.socket=null,n(new Error("WebSocket connection error")),this.tryReconnect()},this.socket.onclose=()=>{this.socket=null,this.hasIdentified=!1,this.connectionPromise=null,this.rejectAllPendingRequests("WebSocket connection closed"),this.tryReconnect()},this.socket.onmessage=this.handleMessage.bind(this)}catch(e){this.connectionPromise=null,n(e instanceof Error?e:new Error("Unknown error when connecting to WebSocket")),this.tryReconnect()}}),this.connectionPromise}identify(){if(!this.socket||this.socket.readyState!==WebSocket.OPEN||this.hasIdentified)return;const e={type:f.Identify,clientType:_.Webkit};this.socket.send(JSON.stringify(e)),this.hasIdentified=!0}handleMessage(e){try{const t=JSON.parse(e.data),n=t.requestId,s=this.pendingRequests.get(n);s&&(this.pendingRequests.delete(n),t.type===f.Error?s.reject(new Error(t.error??"Unknown error")):t.type===f.FrontendResponse&&s.resolve(t.content))}catch(e){console.error("Error handling WebSocket message:",e)}}tryReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return void console.error(`Failed to reconnect after ${this.maxReconnectAttempts} attempts`);this.reconnectAttempts++;const e=this.reconnectDelay*1.5**(this.reconnectAttempts-1);console.warn(`[Extendium] Attempting to reconnect in ${e}ms (attempt ${this.reconnectAttempts})`),setTimeout(async()=>{try{await this.getConnection()}catch{}},e)}rejectAllPendingRequests(e){this.pendingRequests.forEach(t=>{t.reject(new Error(e))}),this.pendingRequests.clear()}cleanupOldRequests(){const e=Date.now(),t=[];this.pendingRequests.forEach((n,s)=>{e-n.timestamp>this.requestTimeout&&t.push(s)}),t.forEach(e=>{const t=this.pendingRequests.get(e);t&&(t.reject(new Error("Request timed out")),this.pendingRequests.delete(e))})}}let w;function b(e){const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.head.appendChild(t)}function x(){return null!==window.location.href.match("^https://store.steampowered.com")||null!==window.location.href.match("^https://steamcommunity.com")}function S(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}window.onDomFullyReady=function(e){x()?null!==document.getElementById("global_header")?e():document.addEventListener("headerReady",e):S(e)};let k=(()=>{let e,n,s=[i],o=[];return class{static{n=this}static{const t="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;a(null,e={value:n},s,{kind:"class",name:n.name,metadata:t},null,o),n=e.value,t&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t}),r(n,o)}extensionName;area;onChanged=new t;constructor(e,t){this.extensionName=e,this.area=t}async get(e,t){const n={area:this.area,keys:e},s=await w.sendMessage(n,y.GetStorage,this.extensionName);return t&&t(s),s}async set(e,t){const n={area:this.area,keys:e};return await w.sendMessage(n,y.SetStorage,this.extensionName),t&&t(),Promise.resolve()}async remove(e,t){const n={area:this.area,keys:e};return await w.sendMessage(n,y.RemoveStorage,this.extensionName),t&&t(),Promise.resolve()}async clear(e){const t={area:this.area};return await w.sendMessage(t,y.ClearStorage,this.extensionName),e&&e(),Promise.resolve()}},n})();function I(e,n){const s=new c(n,!0,e),o=n.getName(),a=new k(o,"sync"),r=new k(o,"local");return g({i18n:n.locale,runtime:{sendMessage:async(...e)=>{const t=function(e){const t=Array.from(e),n=t.length;function s(e){return"function"==typeof e}if(n>=2&&("string"==typeof t[0]||null==t[0])){const e=t[0],o=t[1];return 2===n?{extensionId:e,message:o}:3===n?s(t[2])?{extensionId:e,message:o,callback:t[2]}:{extensionId:e,message:o,options:t[2]}:{extensionId:e,message:o,options:t[2],callback:t[3]}}const o=t[0];return 1===n?{message:o}:2===n?s(t[1])?{message:o,callback:t[1]}:{message:o,options:t[1]}:{message:o,options:t[1],callback:t[2]}}(e);return void 0!==t.options&&s.error("runtime.sendMessage with options is not supported yet, options:",t.options),void 0!==t.extensionId&&"1234"!==t.extensionId&&s.error("runtime.sendMessage with extensionId other then our own is not supported yet, extensionId:",t.extensionId),async function(e,t){s.log("runtime.sendMessage",e);try{const n=await w.sendMessage(e,y.SendMessage,o);return t&&t(n),n}catch(e){throw s.error("Error in runtime.sendMessage:",e),e}}(t.message,t.callback)},id:"1234",onMessage:new t,getURL:e=>n.getFileUrl(e)??"",getManifest:()=>n.manifest,lastError:void 0},storage:{sync:a,local:r,onChanged:new t}},s)}const N='const chrome = extensions.get(extensionName)?.chrome;\n\nconst windowProxy = new Proxy(window, {\n  get(target, prop, receiver) {\n    if (prop === "chrome") {\n      return chrome;\n    }\n\n    const value = Reflect.get(target, prop, receiver);\n\n    // If it\'s a function and from window, bind it\n    if (typeof value === "function" && target.hasOwnProperty(prop)) {\n      return value.bind(target);\n    }\n\n    return value;\n  },\n  has(target, prop) {\n    if (prop === "chrome") return true;\n    return Reflect.has(target, prop);\n  }\n});';function M(e){if("<all_urls>"===e)return/^(https?|ftp|file|chrome-extension):\/\/.*/;const[,t,n,s]=e.match(/^(\*|http|https|file|ftp|chrome-extension):\/\/([^/]*)(\/.*)$/)??[];if(void 0===t||void 0===n||void 0===s)throw new Error(`Invalid match pattern: ${e}`);let o="^";return o+="*"===t?"(http|https)":t,o+=":\\/\\/","*"===n?o+="[^/]+":n.startsWith("*.")?o+=`([^.]+\\.)?${n.slice(2).replace(/\./g,"\\.")}`:o+=n.replace(/\./g,"\\."),o+=s.replace(/\*/g,".*"),o+="$",new RegExp(o)}function E(e,t){return(t.matches?.some(t=>M(t).test(e))??!1)&&(t.exclude_matches?.every(t=>!M(t).test(e))??!0)}class L{extension;chrome;constructor(e,t){this.extension=e,this.chrome=t}}const P=__wrapped_callable__("GetUserInfo");async function F(e){return new Promise(t=>{setTimeout(t,e)})}function R(e,t){return e.replaceAll("%user_id%",t.userId).replaceAll("%persona_name%",t.personaName).replaceAll("%img_src%",t.avatarUrl).replaceAll("%account_balance%",t.accountBalance)}function q(e){if(void 0===e||""===e||"undefined"===e)return"undefined";const t=(new TextEncoder).encode(e),n=Array.from(t).map(e=>String.fromCharCode(e)).join("");return btoa(n)}const U=__wrapped_callable__("GetExtensionsInfos"),C=new Map;return window.extensions=C,e.default=async function(){if(performance.mark("[Extendium] WebkitMain start"),w=new v,x()&&!window.location.href.startsWith("https://store.steampowered.com/news")){if(null!==new URLSearchParams(window.location.search).get(p))return void async function(){const e=new URLSearchParams(window.location.search),t=e.get(p),n=e.get("steamRequestUrl"),s=e.get("steamRequestInfo");if(null===t||null===n||null===s)return;const o=JSON.parse(s),a=await fetch(n,o),r={requestId:t,response:q(await a.text()),status:a.status,url:a.url},i=performance.now();await w.sendMessage(r,y.SteamRequestResponse,""),console.log(`Steam Request ${t} took ${performance.now()-i}ms`),window.close()}();!async function(){const e=JSON.parse(await P());S(()=>{!async function(e){const t=null!==document.querySelector("[data-react-nav-root]");let n;if(t){const t=performance.now();for(;performance.now()-t<5e3;){const e=SSR?.reactRoot?._internalRoot;if(void 0!==e)break;await F(100)}if(performance.now()-t>5e3)throw new Error("Timed out waiting for react root");const s=R('<header id=global_header class="bp0Pu4TVwpI- eGsI8rO3zfU-"style=display:none><div class=Ca2l5LKN6as-><a class=_2GKjdN512t4- href=https://store.steampowered.com/ aria-label="Link to the Steam Homepage"><img alt="Link to the Steam Homepage"src=https://cdn.fastly.steamstatic.com/store/ssr/TYQTXQDA.svg height=44 width=176></a><nav class=MMrgod6KQlc-><ul class=k0AAbwuFzJQ-><a class=ofgQne2Wvqg- href="https://store.steampowered.com/?snr=1_25_4__globalheader"aria-expanded=false aria-current=page>STORE</a><div class="F0YMvqVKHkY- iHkamGVWNgw-"popover=manual role=region><a class=_9-ylsFqlD1Y- href="https://store.steampowered.com/?snr=1_25_4__globalheader"aria-expanded=false aria-current=page>Home</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href="https://store.steampowered.com/explore/?snr=1_25_4__globalheader"aria-expanded=false>Discovery Queue</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/wishlist/ aria-expanded=false>Wishlist</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href="https://store.steampowered.com/points/shop/?snr=1_25_4__globalheader"aria-expanded=false>Points Shop</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href="https://store.steampowered.com/news/?snr=1_25_4__globalheader"aria-expanded=false>News</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href="https://store.steampowered.com/stats/?snr=1_25_4__globalheader"aria-expanded=false>Stats</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href="https://store.steampowered.com/about/?snr=1_25_4__globalheader"aria-expanded=false>About</a><div class=F0YMvqVKHkY- popover=manual role=region></div></div><a class=ofgQne2Wvqg- href=https://steamcommunity.com/ aria-expanded=false>COMMUNITY</a><div class="F0YMvqVKHkY- iHkamGVWNgw-"popover=manual role=region><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/ aria-expanded=false>Home</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/discussions/ aria-expanded=false>Discussions</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/workshop/ aria-expanded=false>Workshop</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/market/ aria-expanded=false>Market</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href="https://steamcommunity.com/?subsection=broadcasts"aria-expanded=false>Broadcasts</a><div class=F0YMvqVKHkY- popover=manual role=region></div></div><a class="ofgQne2Wvqg- FTufO00UqAw-"href=https://steamcommunity.com/my/ aria-expanded=false>%persona_name%</a><div class="F0YMvqVKHkY- iHkamGVWNgw-"popover=manual role=region><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/home/ aria-expanded=false>Activity</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/ aria-expanded=false>Profile</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/friends/ aria-expanded=false>Friends</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/games/ aria-expanded=false>Games</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/groups/ aria-expanded=false>Groups</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/screenshots/ aria-expanded=false>Content</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/badges/ aria-expanded=false>Badges</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href=https://steamcommunity.com/my/inventory/ aria-expanded=false>Inventory</a><div class=F0YMvqVKHkY- popover=manual role=region></div><a class=_9-ylsFqlD1Y- href="https://store.steampowered.com/yearinreview/?snr=1_25_4__globalheader"aria-expanded=false>Steam Replay</a><div class=F0YMvqVKHkY- popover=manual role=region></div></div><a class=ofgQne2Wvqg- href=https://steamcommunity.com/chat/ aria-expanded=false>Chat</a><div class="F0YMvqVKHkY- iHkamGVWNgw-"popover=manual role=region></div><a class=ofgQne2Wvqg- href=https://help.steampowered.com/en/ aria-expanded=false>SUPPORT</a><div class="F0YMvqVKHkY- iHkamGVWNgw-"popover=manual role=region></div></ul></nav><div class=h3Jy-1Il1os-><div class=NzGUCXVXDcA-><div><button class="_99Vgt1ahI7Y- iN37A3Nzs1s-"id=green_envelope_menu_root><svg class=l5XI-YSDhPA- fill=none viewBox="0 0 36 36"xmlns=http://www.w3.org/2000/svg><g class=SVGIcon_Notification><path clip-rule=evenodd d="M32 24V26H4V24L8 19V12C8 9.34784 9.05357 6.8043 10.9289 4.92893C12.8043 3.05357 15.3478 2 18 2C20.6522 2 23.1957 3.05357 25.0711 4.92893C26.9464 6.8043 28 9.34784 28 12V19L32 24Z"fill=currentColor fill-rule=evenodd></path><path clip-rule=evenodd d="M18 34C19.2396 33.9986 20.4483 33.6133 21.46 32.897C22.4718 32.1807 23.2368 31.1687 23.65 30H12.35C12.7632 31.1687 13.5282 32.1807 14.54 32.897C15.5517 33.6133 16.7604 33.9986 18 34Z"fill=currentColor fill-rule=evenodd class=SVGIcon_Notification_Uvula></path></g></svg></button></div></div><div class=Hxi-pnf9Xlw-><button class=QYT54GHN-rI- aria-expanded=false>%persona_name%</button><div class="F0YMvqVKHkY- cQPGTl-Lp-0-"popover=manual role=region><a class=TwsehSqoph8- href=https://steamcommunity.com/id/%user_id%/ tabindex=0>View my profile</a> <a class=TwsehSqoph8- href="https://store.steampowered.com/account/?snr=1_25_4__globalheader"tabindex=0>Account details: <span class=HOrB6lehQpg->%persona_name%</span></a> <a class=TwsehSqoph8- href="https://store.steampowered.com/account/preferences/?snr=1_25_4__globalheader"tabindex=0>Store preferences</a> <a class=TwsehSqoph8- href="https://store.steampowered.com/steamaccount/addfunds/?snr=1_25_4__globalheader"tabindex=0>View my wallet: <span class=HOrB6lehQpg->43,17â‚¬</span></a> <span class=TwsehSqoph8- aria-expanded=false tabindex=0>Change language</span><div class="F0YMvqVKHkY- rzUmQa-ty1I-"popover=manual role=region></div><button class=TwsehSqoph8- tabindex=0>Sign out of account...</button></div></div><a class=_7iCcob-JJ4g- href=https://steamcommunity.com/id/%user_id%/ ><div class="_-2DlbVABlsg- t1-DQ4KhiQ0-"data-size=Small data-status-position=border><div class=gRteJ-XhQG8-></div><img alt="" src="%img_src%" class=YbrTGQJwy1w- draggable=false></div></a></div><div class=r4HLvRr97Ps-></div></div><div class=ewJx-kmPr-8-><button class=SmaLDT4y0RE-><img alt=""src=https://cdn.fastly.steamstatic.com/store/ssr/X3MIBOBA.png class=LyTAF1R-NHw-><div class=FhcQPauG0Bc-><div class=_40MmWrTStR0-><span class=_5N8HUkyU1sA->1</span></div></div></button> <a class=_2GKjdN512t4- href=https://store.steampowered.com/ aria-label="Link to the Steam Homepage"><img alt="Link to the Steam Homepage"src=https://cdn.fastly.steamstatic.com/store/ssr/KSEIVHDA.png height=36></a></div></header>',e);if(n=document.querySelector("#StoreTemplate"),null===n)throw new Error("Could not find page content");n.insertAdjacentHTML("afterbegin",s)}else{const t=R('<div id=global_header style=display:none data-panel=\'{"flow-children":"row"}\'role=banner><div class=content><div class=logo><span id=logo_holder><a href="https://store.steampowered.com/?snr=1_5_9__global-header"aria-label="Link to the Steam Homepage"><img alt="Link to the Steam Homepage"src="https://store.fastly.steamstatic.com/public/shared/images/header/logo_steam.svg?t=962016"height=44 width=176></a></span></div><div class=supernav_container aria-label="Global Menu"role=navigation><a href="https://store.steampowered.com/?snr=1_5_9__global-header"class="menuitem supernav supernav_active"data-tooltip-content=.submenu_Store data-tooltip-type=selector>STORE</a><div class=submenu_Store style=display:none data-submenuid=Store><a href="https://store.steampowered.com/?snr=1_5_9__global-header"class=submenuitem>Home</a> <a href="https://store.steampowered.com/explore/?snr=1_5_9__global-header"class=submenuitem>Discovery Queue</a> <a href=https://steamcommunity.com/my/wishlist/ class=submenuitem>Wishlist</a> <a href="https://store.steampowered.com/points/shop/?snr=1_5_9__global-header"class=submenuitem>Points Shop</a> <a href="https://store.steampowered.com/news/?snr=1_5_9__global-header"class=submenuitem>News</a> <a href="https://store.steampowered.com/stats/?snr=1_5_9__global-header"class=submenuitem>Stats</a> <a href="https://store.steampowered.com/about/?snr=1_5_9__global-header"class=submenuitem>About</a></div><a href=https://steamcommunity.com/ class="menuitem supernav"data-tooltip-content=.submenu_Community data-tooltip-type=selector>COMMUNITY</a><div class=submenu_Community style=display:none data-submenuid=Community><a href=https://steamcommunity.com/ class=submenuitem>Home </a><a href=https://steamcommunity.com/discussions/ class=submenuitem>Discussions </a><a href=https://steamcommunity.com/workshop/ class=submenuitem>Workshop </a><a href=https://steamcommunity.com/market/ class=submenuitem>Market </a><a href="https://steamcommunity.com/?subsection=broadcasts"class=submenuitem>Broadcasts</a></div><a href=https://steamcommunity.com/my/ class="menuitem supernav username"data-tooltip-content=.submenu_Profile data-tooltip-type=selector>%persona_name%</a><div class=submenu_Profile style=display:none data-submenuid=Profile><a href=https://steamcommunity.com/my/home/ class=submenuitem>Activity </a><a href=https://steamcommunity.com/my/ class=submenuitem>Profile </a><a href=https://steamcommunity.com/my/friends/ class=submenuitem>Friends </a><a href=https://steamcommunity.com/my/games/ class=submenuitem>Games </a><a href=https://steamcommunity.com/my/groups/ class=submenuitem>Groups </a><a href=https://steamcommunity.com/my/screenshots/ class=submenuitem>Content </a><a href=https://steamcommunity.com/my/badges/ class=submenuitem>Badges </a><a href=https://steamcommunity.com/my/inventory/ class=submenuitem>Inventory </a><a href="https://store.steampowered.com/yearinreview/?snr=1_5_9__global-header"class=submenuitem>Steam Replay</a></div><a href=https://steamcommunity.com/chat/ class=menuitem>Chat </a><a href=https://help.steampowered.com/en/ class=menuitem>SUPPORT</a></div><div id=global_actions><div id=global_action_menu role=navigation aria-label="Account Menu"><div id=header_notification_area style=position:relative><div data-featuretarget=green-envelope><div><button class="_1jW5_Ycv6jGKu28A1OSIQK _34A9kjlnmgfUWSmr16VjXE"id=green_envelope_menu_root><svg class=_13fwmIK8Ajo0qndUS5zb7E fill=none viewBox="0 0 36 36"xmlns=http://www.w3.org/2000/svg><g class=SVGIcon_Notification><path clip-rule=evenodd d="M32 24V26H4V24L8 19V12C8 9.34784 9.05357 6.8043 10.9289 4.92893C12.8043 3.05357 15.3478 2 18 2C20.6522 2 23.1957 3.05357 25.0711 4.92893C26.9464 6.8043 28 9.34784 28 12V19L32 24Z"fill=currentColor fill-rule=evenodd></path><path clip-rule=evenodd d="M18 34C19.2396 33.9986 20.4483 33.6133 21.46 32.897C22.4718 32.1807 23.2368 31.1687 23.65 30H12.35C12.7632 31.1687 13.5282 32.1807 14.54 32.897C15.5517 33.6133 16.7604 33.9986 18 34Z"fill=currentColor fill-rule=evenodd class=SVGIcon_Notification_Uvula></path></g></svg></button></div></div><div class="global_header_toggle_button header_notification_bell header_notification_btn"style=background-color:rgba(0,0,0,0) id=header_notification_link></div></div><button class="global_action_link persona_name_text_content pulldown"id=account_pulldown onclick=\'ShowMenu(this,"account_dropdown","right","bottom",!0)\'>%persona_name%</button><div class=popup_block_new style=display:none id=account_dropdown><div class="popup_body popup_menu"><a href=https://steamcommunity.com/id/%user_id%/ class=popup_menu_item>View my profile</a> <a href="https://store.steampowered.com/account/?snr=1_5_9__global-header"class=popup_menu_item>Account details: <span class=account_name>%persona_name%</span></a> <a href="https://store.steampowered.com/account/preferences/?snr=1_5_9__global-header"class=popup_menu_item>Store preferences</a> <a href="https://store.steampowered.com/steamaccount/addfunds/?snr=1_5_9__global-header"class=popup_menu_item>View my wallet <span class=account_name>%account_balance%</span></a> <span class=popup_menu_item id=account_language_pulldown>Change language</span><div class=popup_block_new style=display:none id=language_dropdown><div class="popup_body popup_menu"><a href="https://www.valvesoftware.com/en/contact?contact-person=Translation%20Team%20Feedback"class="popup_menu_item tight"target=_blank>Report a translation problem</a></div></div><a href=javascript:Logout(); class=popup_menu_item>Sign out of account...</a></div></div><script>RegisterFlyout("account_language_pulldown","language_dropdown","leftsubmenu","bottomsubmenu",!0)<\/script><div id=header_wallet_ctn><a href=https://store.steampowered.com/account/store_transactions/ class=global_action_link id=header_wallet_balance>%account_balance%</a></div></div><a href=https://steamcommunity.com/id/%user_id%/ class="online playerAvatar user_avatar"aria-label="View your profile"><img alt=%persona_name% src=%img_src%></a></div></div></div>',e);n=document.querySelector(".responsive_page_content")??document.querySelector(".headerOverride")??document.querySelector("center"),n?.insertAdjacentHTML("afterbegin",t)}const s=document.getElementById("global_header");if(null===s)throw new Error("Could not find global header");s.style.display="block";const o=s.firstElementChild;o.style.transition="height 0.25s ease-in-out 0s",o.style.overflow="hidden",o.style.setProperty("height","0px","important"),b("https://store.fastly.steamstatic.com/public/css/applications/store/greenenvelope.css");const a=document.createElement("button");a.style.position="fixed",a.style.top="0",a.style.right="0",a.style.display="none",a.style.zIndex="9000",a.textContent="Show Header";let r=!1;a.addEventListener("click",()=>{r?(o.style.overflow="hidden",o.style.setProperty("height","0px","important"),a.textContent="Show Header"):(o.style.removeProperty("height"),a.textContent="Hide Header",setTimeout(()=>{o.style.removeProperty("overflow")},250)),r=!r}),document.addEventListener("keydown",e=>{"Control"===e.key&&(a.style.display="block")}),document.addEventListener("keyup",e=>{"Control"===e.key&&(a.style.display="none")}),n?.prepend(a),t||(window.$J??window.$)("#global_header .supernav").v_tooltip({location:"bottom",destroyWhenDone:!1,tooltipClass:"supernav_content",offsetY:-6,offsetX:1,horizontalSnap:4,tooltipParent:"#global_header .supernav_container",correctForScreenSize:!1}),document.dispatchEvent(new Event("headerReady"))}(e)})}()}const e=performance.mark("[Extendium] WebkitMain extensions loading start"),t=JSON.parse(await U()),n=t.manifests,s=t.extensionsDir.replaceAll("\\","/"),o=performance.mark("[Extendium] WebkitMain extensions loaded");performance.measure("[Extendium] WebkitMain extensions loading",e.name,o.name);const a=`https://js.millennium.app/${s}`,r=[];for(const[e,t]of Object.entries(n)){const n=new u(t,`${a}/${e}`,e);r.push(n)}await Promise.all(r.map(async e=>{await e.init();const t=I("content",e);C.set(e.getName(),new L(e,t)),await async function(e){const t=e.manifest.content_scripts??[],n=new Map,s=new Set;for(const o of t)if(E(location.href,o)){if(o.js)for(const t of o.js)n.set(e.getFileUrl(t)??"",o);if(o.css)for(const t of o.css)s.add(e.getFileUrl(t)??"")}s.forEach(e=>{b(e)}),await async function(e,t){if(0===e.size)return;const n=[],s=[],o=Array.from(e).map(async([e,t])=>{const o=`// ${e}\n${await(await fetch(e)).text()}`;"document_end"===(t.run_at??"document_end")?n.push(o):s.push(o)}),a=performance.mark(`[Extendium][${t.getName()}] mutateScripts start`);await Promise.all(o);const r=performance.mark(`[Extendium][${t.getName()}] mutateScripts end`);performance.measure(`[Extendium][${t.getName()}] mutateScripts`,a.name,r.name);let i=s.join("\n\n");n.length>0&&(i+=`\n\nonDomFullyReady(() => {\n${n.join("\n\n")}\n});`);const l=t.getFileUrl(`${t.getName().toLowerCase().replace(/\s/g,"_")}_content.js`)??"";i=`(function() {\nconst extensionName = '${t.getName().replace(/'/g,"\\'")}'\n${N}\n${i}\n})();`,i+=`\n//# sourceURL=${l}`,i=i.replaceAll("sourceMappingURL=",""),function(e,t,n){const s=t.createElement("script");s.type="text/javascript",s.textContent=n,s.setAttribute("original-src",e),t.head.appendChild(s)}(l,document,i),performance.mark(`[Extendium][${t.getName()}] mutateScripts done`)}(n,e)}(e)})),function(e,t){const n=function(e){return[...e.values()].flatMap(e=>{const t=e.extension,n=t.options.getOptionsPageUrl()??"",s=t.getFileUrl(n)??"";return[[n,t.getName()],[s,t.getName()]].filter(([e])=>""!==e)}).reduce((e,[t,n])=>e.set(t??"",n??""),new Map)}(e);document.addEventListener("click",e=>{const s=e.target.closest("a");if(s){const o=decodeURIComponent(s.href);if(n.has(o))return e.preventDefault(),void w.sendMessage({},y.OpenOptions,n.get(o)??"");t.some(e=>function(e,t){return e.isRegex?function(e){const t=e.match(/^\/(.*)\/([gimsuy]*)$/);return t?new RegExp(t[1]??"",t[2]??""):new RegExp(e)}(e.match).test(t):t.includes(e.match)}(e,o))&&(location.href=`steam://openurl_external/${o}`,e.preventDefault())}})}(C,t.externalLinks??[]),performance.mark("[Extendium] WebkitMain content scripts created done"),async function(){}()},Object.defineProperty(e,"__esModule",{value:!0}),e}({},window.MILLENNIUM_API);return e};function ExecutePluginModule(){let e=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName];e.OnPluginConfigChange=function(t,n,s){t in e.settingsStore&&(e.ignoreProxyFlag=!0,e.settingsStore[t]=s,e.ignoreProxyFlag=!1)},MILLENNIUM_BACKEND_IPC.postMessage(0,{pluginName:pluginName,methodName:"__builtins__.__millennium_plugin_settings_parser__"}).then(async t=>{"string"==typeof t.returnValue&&(e.ignoreProxyFlag=!0,e.settingsStore=e.DefinePluginSetting(Object.fromEntries(JSON.parse(atob(t.returnValue)).map(e=>[e.functionName,e]))),e.ignoreProxyFlag=!1);let n=PluginEntryPointMain();Object.assign(window.PLUGIN_LIST[pluginName],{...n,__millennium_internal_plugin_name_do_not_use_or_change__:pluginName});let s=await n.default();var o;s&&(o=s)&&void 0!==o.title&&void 0!==o.icon&&void 0!==o.content?window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS[pluginName]=s:console.warn(`Plugin ${pluginName} does not contain proper SidebarNavigation props and therefor can't be mounted by Millennium. Please ensure it has a title, icon, and content.`)})}ExecutePluginModule();