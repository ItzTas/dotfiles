"use strict";var _as=(()=>{var qo=Object.create;var po=Object.defineProperty;var jo=Object.getOwnPropertyDescriptor;var Vo=Object.getOwnPropertyNames;var $o=Object.getPrototypeOf,Yo=Object.prototype.hasOwnProperty;var Xo=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Jo=(n,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Vo(e))!Yo.call(n,i)&&i!==t&&po(n,i,{get:()=>e[i],enumerable:!(s=jo(e,i))||s.enumerable});return n};var de=(n,e,t)=>(t=n!=null?qo($o(n)):{},Jo(e||!n||!n.__esModule?po(t,"default",{value:n,enumerable:!0}):t,n));var se=Xo((Nt,fo)=>{(function(n,e){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],e);else if(typeof Nt<"u")e(fo);else{var t={exports:{}};e(t),n.browser=t.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Nt,function(n){"use strict";if(!chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let e="The message port closed before a response was received.",t=s=>{let i={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(i).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(u,d=void 0){super(d),this.createItem=u}get(u){return this.has(u)||this.set(u,this.createItem(u)),super.get(u)}}let f=c=>c&&typeof c=="object"&&typeof c.then=="function",S=(c,u)=>(...d)=>{s.runtime.lastError?c.reject(new Error(s.runtime.lastError.message)):u.singleCallbackArg||d.length<=1&&u.singleCallbackArg!==!1?c.resolve(d[0]):c.resolve(d)},C=c=>c==1?"argument":"arguments",q=(c,u)=>function(h,...y){if(y.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${C(u.minArgs)} for ${c}(), got ${y.length}`);if(y.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${C(u.maxArgs)} for ${c}(), got ${y.length}`);return new Promise((I,O)=>{if(u.fallbackToNoCallback)try{h[c](...y,S({resolve:I,reject:O},u))}catch(m){console.warn(`${c} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),h[c](...y),u.fallbackToNoCallback=!1,u.noCallback=!0,I()}else u.noCallback?(h[c](...y),I()):h[c](...y,S({resolve:I,reject:O},u))})},$e=(c,u,d)=>new Proxy(u,{apply(h,y,I){return d.call(y,c,...I)}}),ae=Function.call.bind(Object.prototype.hasOwnProperty),ce=(c,u={},d={})=>{let h=Object.create(null),y={has(O,m){return m in c||m in h},get(O,m,P){if(m in h)return h[m];if(!(m in c))return;let A=c[m];if(typeof A=="function")if(typeof u[m]=="function")A=$e(c,c[m],u[m]);else if(ae(d,m)){let H=q(m,d[m]);A=$e(c,c[m],H)}else A=A.bind(c);else if(typeof A=="object"&&A!==null&&(ae(u,m)||ae(d,m)))A=ce(A,u[m],d[m]);else if(ae(d,"*"))A=ce(A,u[m],d["*"]);else return Object.defineProperty(h,m,{configurable:!0,enumerable:!0,get(){return c[m]},set(H){c[m]=H}}),A;return h[m]=A,A},set(O,m,P,A){return m in h?h[m]=P:c[m]=P,!0},defineProperty(O,m,P){return Reflect.defineProperty(h,m,P)},deleteProperty(O,m){return Reflect.deleteProperty(h,m)}},I=Object.create(c);return new Proxy(I,y)},$=c=>({addListener(u,d,...h){u.addListener(c.get(d),...h)},hasListener(u,d){return u.hasListener(c.get(d))},removeListener(u,d){u.removeListener(c.get(d))}}),Q=new p(c=>typeof c!="function"?c:function(d){let h=ce(d,{},{getContent:{minArgs:0,maxArgs:0}});c(h)}),Ye=new p(c=>typeof c!="function"?c:function(d,h,y){let I=!1,O,m=new Promise(ee=>{O=function(U){I=!0,ee(U)}}),P;try{P=c(d,h,O)}catch(ee){P=Promise.reject(ee)}let A=P!==!0&&f(P);if(P!==!0&&!A&&!I)return!1;let H=ee=>{ee.then(U=>{y(U)},U=>{let xe;U&&(U instanceof Error||typeof U.message=="string")?xe=U.message:xe="An unexpected error occurred",y({__mozWebExtensionPolyfillReject__:!0,message:xe})}).catch(U=>{console.error("Failed to send onMessage rejected reply",U)})};return H(A?P:m),!0}),lt=({reject:c,resolve:u},d)=>{s.runtime.lastError?s.runtime.lastError.message===e?u():c(new Error(s.runtime.lastError.message)):d&&d.__mozWebExtensionPolyfillReject__?c(new Error(d.message)):u(d)},Xe=(c,u,d,...h)=>{if(h.length<u.minArgs)throw new Error(`Expected at least ${u.minArgs} ${C(u.minArgs)} for ${c}(), got ${h.length}`);if(h.length>u.maxArgs)throw new Error(`Expected at most ${u.maxArgs} ${C(u.maxArgs)} for ${c}(), got ${h.length}`);return new Promise((y,I)=>{let O=lt.bind(null,{resolve:y,reject:I});h.push(O),d.sendMessage(...h)})},pt={devtools:{network:{onRequestFinished:$(Q)}},runtime:{onMessage:$(Ye),onMessageExternal:$(Ye),sendMessage:Xe.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Xe.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return i.privacy={network:{"*":Y},services:{"*":Y},websites:{"*":Y}},ce(s,pt,i)};n.exports=t(chrome)}else n.exports=globalThis.browser})});var oe=class{constructor(e){this.context=e}checkPrerequisites(){return!0}logError(e,t,...s){console.group(this.constructor.name),console.error(t,...s),console.error(e),console.groupEnd()}};var yt=class extends Error{constructor(e){super(e),this.name="LoginError"}},vt=class extends Error{constructor(e){super(e),this.name="ServerOutageError"}},Tt=class extends Error{constructor(e){super(e),this.name="OAuth Unauthorized"}},Et=class extends Error{constructor(e,t){super(t),this.code=e}},kt=class extends Error{constructor(e,t){super(e),this.featureName=t}},ye={LoginError:yt,ServerOutageError:vt,HTTPError:Et,FeatureDependencyError:kt,OAuthUnauthorized:Tt};var ve=class{constructor(e,t,s){this.language=null;this.featureMap=new Map;this.promiseMap=new Map;this.dependencies=new Map;this.stats={completed:0,failed:0,dependency:0};this.language=e.language,this.user=e.user,this.type=t;for(let i of s){let p=new i(this);this.featureMap.set(p.constructor,p)}}static async create(e){return null}dependency(e,...t){this.dependencies.set(e,new Map(t))}async applyFeatures(){let e=[...this.featureMap.values()].map(t=>this.getFeaturePromise(t));await Promise.allSettled(e),console.log("Feature loading complete, %i successfully loaded, %i failed to load, %i didn't load due to dependency errors",this.stats.completed,this.stats.failed,this.stats.dependency)}getFeaturePromise(e){let t=e.constructor,s=this.promiseMap.get(t);return s||(s=this.applyInternal(e),this.promiseMap.set(t,s)),s}async applyInternal(e){let t=e.constructor,s=this.dependencies.get(t);if(s)try{let p=[];for(let[f,S]of s)p.push((async()=>{let C=this.featureMap.get(f);if(!C)throw new ye.FeatureDependencyError("Dependency feature not found",f.name);let q=await this.getFeaturePromise(C);return S||q})());if(!(await Promise.all(p)).every(f=>f))return!1}catch{console.warn("Not applying feature %s due to an error in the dependency chain",t.name),++this.stats.dependency}let i=!!await e.checkPrerequisites();if(i)try{await e.apply(),++this.stats.completed}catch(p){let f=t.name;throw console.group(f),console.error("Error while applying feature %s",f),console.error(p),console.groupEnd(),++this.stats.failed,new ye.FeatureDependencyError("Failed to apply",f)}return i}};var uo=(r=>(r[r.ACCOUNT=0]="ACCOUNT",r[r.APP=1]="APP",r[r.BUNDLE=2]="BUNDLE",r[r.STORE_DEFAULT=3]="STORE_DEFAULT",r[r.FUNDS=4]="FUNDS",r[r.REGISTER_KEY=5]="REGISTER_KEY",r[r.CART=6]="CART",r[r.SEARCH=7]="SEARCH",r[r.CHARTS=8]="CHARTS",r[r.STORE_FRONT=9]="STORE_FRONT",r[r.SUB=10]="SUB",r[r.WISHLIST=11]="WISHLIST",r[r.AGECHECK=12]="AGECHECK",r[r.COMMUNITY_DEFAULT=13]="COMMUNITY_DEFAULT",r[r.WORKSHOP=14]="WORKSHOP",r[r.PROFILE_ACTIVITY=15]="PROFILE_ACTIVITY",r[r.GAMES=16]="GAMES",r[r.PROFILE_EDIT=17]="PROFILE_EDIT",r[r.BADGES=18]="BADGES",r[r.GAME_CARD=19]="GAME_CARD",r[r.FRIENDS_THAT_PLAY=20]="FRIENDS_THAT_PLAY",r[r.GLOBAL_STATS=21]="GLOBAL_STATS",r[r.MARKET_SEARCH=22]="MARKET_SEARCH",r[r.INVENTORY=23]="INVENTORY",r[r.MARKET_LISTING=24]="MARKET_LISTING",r[r.MARKET_HOME=25]="MARKET_HOME",r[r.PROFILE_HOME=26]="PROFILE_HOME",r[r.GROUP_HOME=27]="GROUP_HOME",r[r.GUIDES=28]="GUIDES",r[r.COMMUNITY_APP=29]="COMMUNITY_APP",r[r.PROFILE_STATS=30]="PROFILE_STATS",r[r.MY_WORKSHOP=31]="MY_WORKSHOP",r[r.SHARED_FILES=32]="SHARED_FILES",r[r.WORKSHOP_BROWSE=33]="WORKSHOP_BROWSE",r[r.EDIT_GUIDE=34]="EDIT_GUIDE",r[r.RECOMMENDED=35]="RECOMMENDED",r[r.BOOSTER_CREATOR=36]="BOOSTER_CREATOR",r[r.TRADE_OFFER=37]="TRADE_OFFER",r[r.FRIENDS_AND_GROUPS=38]="FRIENDS_AND_GROUPS",r[r.POINTS_SHOP=39]="POINTS_SHOP",r[r.LICENSES=40]="LICENSES",r))(uo||{}),mo=uo;var Ct="tradeoffer_numItem",Pt="tradeoffer_numItems",go="tradeoffer_back";var ho=de(se()),xo={version:ho.default.runtime.getManifest().version,db_version:6};var It=de(se());var Ns=de(se()),Te=class{constructor(e){this.storageArea=e}get onChanged(){return this.storageArea.onChanged}async get(e){return(await this.storageArea.get(e))[e]??void 0}getObject(e){return this.storageArea.get(e)}set(e,t){return this.storageArea.set({[e]:t})}setObject(e){return this.storageArea.set(e)}remove(...e){return this.storageArea.remove(e)}};var Ee=class extends Te{constructor(){super(It.default.storage.sync)}get QUOTA_BYTES_PER_ITEM(){return It.default.storage.sync.QUOTA_BYTES_PER_ITEM??8192}},Ls=new Ee;var nt={language:"english",version:xo.version,version_show:!0,highlight_owned_color:"#00ce67",highlight_wishlist_color:"#0491bf",highlight_followed_color:"#d64550",highlight_coupon_color:"#a26426",highlight_inv_gift_color:"#800040",highlight_inv_guestpass_color:"#513c73",highlight_notinterested_color:"#4f4f4f",highlight_ignored_owned_color:"#4f4f4f",highlight_collection_color:"#856d0e",highlight_waitlist_color:"#4c7521",tag_owned_color:"#00b75b",tag_wishlist_color:"#0383b4",tag_followed_color:"#d64550",tag_coupon_color:"#c27120",tag_inv_gift_color:"#b10059",tag_inv_guestpass_color:"#65449a",tag_notinterested_color:"#4f4f4f",tag_ignored_owned_color:"#4f4f4f",tag_collection_color:"#856d0e",tag_waitlist_color:"#4c7521",highlight_owned:!0,highlight_wishlist:!0,highlight_followed:!0,highlight_coupon:!1,highlight_inv_gift:!1,highlight_inv_guestpass:!1,highlight_notinterested:!1,highlight_ignored_owned:!1,highlight_excludef2p:!1,highlight_collection:!0,highlight_waitlist:!0,tag_owned:!1,tag_wishlist:!1,tag_followed:!1,tag_coupon:!1,tag_inv_gift:!1,tag_inv_guestpass:!1,tag_notinterested:!0,tag_ignored_owned:!0,tag_collection:!1,tag_waitlist:!1,tag_short:!1,hidetmsymbols:!1,showlowestprice:!0,showlowestprice_onwishlist:!0,showlowestpricecoupon:!0,showallstores:!0,excluded_stores:[],override_price:"auto",showregionalprice:"mouse",regional_countries:["us","gb","fr","br","au","jp"],show_es_homepagetabs:!0,showmarkettotal:!1,showmcus:!0,showoc:!0,showhltb:!0,showyoutube:!0,showtwitch:!0,showpcgw:!0,showcompletionistme:!1,showprotondb:!1,showviewinlibrary:!1,showsteamcardexchange:!1,showitadlinks:!0,showsteamdb:!0,showbartervg:!1,showyoutubegameplay:!0,showyoutubereviews:!0,showwsgf:!0,exfgls:!0,app_custom_link:[{enabled:!0,name:"Google",url:"https://www.google.com/search?q=[ID]+[NAME]",icon:"https://www.google.com/images/branding/product/ico/googleg_lodp.ico"}],customize_apppage:{},customize_frontpage:{},show_package_info:!1,show_players_info:!0,show_early_access:!0,show_alternative_linux_icon:!1,show_itad_button:!1,skip_got_steam:!1,installsteam:"show",openinnewtab:!1,keepssachecked:!1,showemptywishlist:!0,user_notes_app:!0,user_notes_wishlist:!0,user_notes_simple:!0,showwishliststats:!0,oneclickremovewl:!1,user_notes_adapter:"synced_storage",showlanguagewarning:!0,showlanguagewarninglanguage:"english",homepage_tab_selection:"remember",send_age_info:!0,removebroadcasts:!1,prevent_video_pause:!1,tabtitle_appname_first:!1,horizontalscrolling:!0,showsupportinfo:!0,showdrm:!0,regional_hideworld:!1,showinvnav:!0,quickinv:!0,quickinv_diff:-.01,community_default_tab:"",showallstats:!0,replacecommunityhublinks:!1,hideannouncementcomments:!1,showachinstore:!0,hideactivelistings:!1,showlowestmarketprice:!0,hidespamcomments:!1,spamcommentregex:"[\\u2500-\\u25FF]",wlbuttoncommunityapp:!0,removeguideslanguagefilter:!1,confirmdeletecomment:!0,disablelinkfilter:!1,show1clickgoo:!0,show_profile_link_images:"gray",show_custom_themes:!0,profile_pinned_bg:!1,friends_append_nickname:!1,profile_steamrepcn:!0,profile_steamgifts:!0,profile_steamtrades:!0,profile_bartervg:!0,profile_steamdbcalc:!0,profile_backpacktf:!0,profile_steamid:!0,profile_custom_link:[{enabled:!0,name:"Google",url:"https://www.google.com/search?q=[ID]",icon:"https://www.google.com/images/branding/product/ico/googleg_lodp.ico"}],group_steamgifts:!0,steamcardexchange:!0,purchase_dates:!0,show_badge_progress:!0,show_coupon:!0,show_wishlist_link:!0,show_wishlist_count:!0,show_progressbar:!0,show_backtotop:!1,profile_showcase_twitch:!0,profile_showcase_own_twitch:!1,profile_showcase_twitch_profileonly:!1,itad_sync_library:!0,itad_sync_wishlist:!0,add_to_waitlist:!1,collection_banner_notowned:!1,itad_sync_notes:!1,context_steam_store:!1,context_steam_lucky:!1,context_steam_market:!1,context_itad:!1,context_bartervg:!1,context_steamdb:!1,context_steamdb_instant:!1,context_steam_keys:!1},rt=class{constructor(){this.listeners=new Set}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}invoke(){for(let e of this.listeners)e()}},ke=class{static{this.storage=new Ee}static{this.onSaveStart=new rt}static{this.onSaveEnd=new rt}static async load(){this.data=await this.storage.getObject(nt)}static init(){return this.promise||(this.promise=this.load()),this.promise}static getDefault(e){return nt[e]}static get(e){if(!this.data)throw new Error("Settings have not been loaded");return this.data[e]}static async set(e,t){this.onSaveStart.invoke(),this.data[e]=t,await this.storage.set(e,t),this.onSaveEnd.invoke()}static remove(e){this.storage.remove(e),this.data[e]=structuredClone(nt[e])}static clear(){this.storage.remove(...Object.keys(this.data)),this.data=structuredClone(nt)}static async import(e){await this.storage.setObject(e),await this.load()}static asObject(){return structuredClone(this.data)}},Rt=new Proxy(ke,{get(n,e){return n.get(e)},set(n,e,t){return n.set(e,t),!0}});var wo=de(se()),ne=class n{static getURL(e){return wo.default.runtime.getURL(e)}static get(e){return fetch(n.getURL(e))}static async getJSON(e){return await(await n.get(e)).json()}static async getText(e){return await(await n.get(e)).text()}};var K=class n{static{this.map={english:"en",bulgarian:"bg",czech:"cs",danish:"da",dutch:"nl",finnish:"fi",french:"fr",greek:"el",german:"de",hungarian:"hu",italian:"it",japanese:"ja",koreana:"ko",norwegian:"no",polish:"pl",portuguese:"pt-PT",brazilian:"pt-BR",russian:"ru",romanian:"ro",schinese:"zh-CN",spanish:"es-ES",latam:"es-419",swedish:"sv-SE",tchinese:"zh-TW",thai:"th",turkish:"tr",ukrainian:"ua",vietnamese:"vi"}}constructor(e){this._name=e,this._code=n.map[e]??null}get name(){return this._name}get code(){return this._code}isOneOf(...e){return e.includes(this._name)}};var Ao=de(se());var Ce=class{static parse(e){let t=e.match(/(.*):\s(.+)/);return t?{name:t[1]??"",message:t[2]??""}:{name:null,message:null}}};var b=class{static async send(e,t={}){document.dispatchEvent(new CustomEvent("asRequestStart"));try{let s=await Ao.default.runtime.sendMessage({action:e,params:t});return document.dispatchEvent(new CustomEvent("asRequestDone")),s}catch(s){let i=Ce.parse(s.message??"");throw document.dispatchEvent(new CustomEvent("asRequestError",{detail:i})),s}}};var Pe=class{static wishlistAdd(e){return b.send("wishlist.add",{appid:e})}static wishlistRemove(e){return b.send("wishlist.remove",{appid:e})}static fetchAppDetails(e,t=void 0){return b.send("appdetails",{appid:e,filter:t})}static getPurchaseDate(e,t){return b.send("purchases",{appName:e,lang:t})}static getCurrency(){return b.send("currency")}static clearPurchases(){return b.send("clearpurchases")}static clearDynamicStore(){return b.send("dynamicstore.clear")}static getDynamicStoreStatus(e){return b.send("dynamicstore.status",{ids:e})}static getDynamicStoreRandomApp(){return b.send("dynamicstore.randomapp")}};var fe=class{static load(e){return ne.getJSON(`/localization/compiled/${e}.json`)}static async init(e){let t=Rt.language;e===null?e=new K(t):e.name!==t&&(Rt.language=e.name,Pe.clearPurchases());let s=e.code??"en";try{this.locale=await this.load(s)}catch{console.error(`Failed to load ${s}`),this.locale=await this.load("en")}}};function Ne(n,e=null){let t=fe.locale.strings[n]??"<<missing text>>";if(e!==null)for(let[s,i]of Object.entries(e))t=t.replaceAll(`__${s}__`,String(i));return t}var{entries:No,setPrototypeOf:bo,isFrozen:Qo,getPrototypeOf:es,getOwnPropertyDescriptor:ts}=Object,{freeze:D,seal:W,create:Io}=Object,{apply:Ut,construct:Wt}=typeof Reflect<"u"&&Reflect;D||(D=function(e){return e});W||(W=function(e){return e});Ut||(Ut=function(e,t,s){return e.apply(t,s)});Wt||(Wt=function(e,t){return new e(...t)});var it=M(Array.prototype.forEach),os=M(Array.prototype.lastIndexOf),So=M(Array.prototype.pop),Ie=M(Array.prototype.push),ss=M(Array.prototype.splice),ct=M(String.prototype.toLowerCase),Lt=M(String.prototype.toString),yo=M(String.prototype.match),Re=M(String.prototype.replace),ns=M(String.prototype.indexOf),rs=M(String.prototype.trim),z=M(Object.prototype.hasOwnProperty),L=M(RegExp.prototype.test),Le=is(TypeError);function M(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return Ut(n,e,s)}}function is(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Wt(n,t)}}function g(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ct;bo&&bo(n,null);let s=e.length;for(;s--;){let i=e[s];if(typeof i=="string"){let p=t(i);p!==i&&(Qo(e)||(e[s]=p),i=p)}n[i]=!0}return n}function as(n){for(let e=0;e<n.length;e++)z(n,e)||(n[e]=null);return n}function re(n){let e=Io(null);for(let[t,s]of No(n))z(n,t)&&(Array.isArray(s)?e[t]=as(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=re(s):e[t]=s);return e}function De(n,e){for(;n!==null;){let s=ts(n,e);if(s){if(s.get)return M(s.get);if(typeof s.value=="function")return M(s.value)}n=es(n)}function t(){return null}return t}var vo=D(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dt=D(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Mt=D(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),cs=D(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ot=D(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_s=D(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),To=D(["#text"]),Eo=D(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ft=D(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ko=D(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),at=D(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ls=W(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ps=W(/<%[\w\W]*|[\w\W]*%>/gm),us=W(/\$\{[\w\W]*/gm),ms=W(/^data-[\-\w.\u00B7-\uFFFF]+$/),gs=W(/^aria-[\-\w]+$/),Ro=W(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ds=W(/^(?:\w+script|data):/i),fs=W(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Lo=W(/^html$/i),hs=W(/^[a-z][.\w]*(-[.\w]+)+$/i),Co=Object.freeze({__proto__:null,ARIA_ATTR:gs,ATTR_WHITESPACE:fs,CUSTOM_ELEMENT:hs,DATA_ATTR:ms,DOCTYPE_NAME:Lo,ERB_EXPR:ps,IS_ALLOWED_URI:Ro,IS_SCRIPT_OR_DATA:ds,MUSTACHE_EXPR:ls,TMPLIT_EXPR:us}),Me={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},xs=function(){return typeof window>"u"?null:window},ws=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(s=t.getAttribute(i));let p="dompurify"+(s?"#"+s:"");try{return e.createPolicy(p,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+p+" could not be created."),null}},Po=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Do(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xs(),e=l=>Do(l);if(e.version="3.2.4",e.removed=[],!n||!n.document||n.document.nodeType!==Me.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n,s=t,i=s.currentScript,{DocumentFragment:p,HTMLTemplateElement:f,Node:S,Element:C,NodeFilter:q,NamedNodeMap:$e=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:ae,DOMParser:ce,trustedTypes:$}=n,Q=C.prototype,Ye=De(Q,"cloneNode"),lt=De(Q,"remove"),Xe=De(Q,"nextSibling"),pt=De(Q,"childNodes"),Y=De(Q,"parentNode");if(typeof f=="function"){let l=t.createElement("template");l.content&&l.content.ownerDocument&&(t=l.content.ownerDocument)}let c,u="",{implementation:d,createNodeIterator:h,createDocumentFragment:y,getElementsByTagName:I}=t,{importNode:O}=s,m=Po();e.isSupported=typeof No=="function"&&typeof Y=="function"&&d&&d.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:P,ERB_EXPR:A,TMPLIT_EXPR:H,DATA_ATTR:ee,ARIA_ATTR:U,IS_SCRIPT_OR_DATA:xe,ATTR_WHITESPACE:zt,CUSTOM_ELEMENT:Oo}=Co,{IS_ALLOWED_URI:Ht}=Co,v=null,Bt=g({},[...vo,...Dt,...Mt,...Ot,...To]),E=null,Gt=g({},[...Eo,...Ft,...ko,...at]),r=Object.seal(Io(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),we=null,ut=null,Kt=!0,mt=!0,qt=!1,jt=!0,_e=!1,gt=!0,te=!1,dt=!1,ft=!1,le=!1,Je=!1,Ze=!1,Vt=!0,$t=!1,Fo="user-content-",ht=!0,Ae=!1,pe={},ue=null,Yt=g({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xt=null,Jt=g({},["audio","video","img","source","image","track"]),xt=null,Zt=g({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qe="http://www.w3.org/1998/Math/MathML",et="http://www.w3.org/2000/svg",j="http://www.w3.org/1999/xhtml",me=j,wt=!1,At=null,Uo=g({},[Qe,et,j],Lt),tt=g({},["mi","mo","mn","ms","mtext"]),ot=g({},["annotation-xml"]),Wo=g({},["title","style","font","a","script"]),be=null,zo=["application/xhtml+xml","text/html"],Ho="text/html",T=null,ge=null,Bo=t.createElement("form"),Qt=function(o){return o instanceof RegExp||o instanceof Function},bt=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ge&&ge===o)){if((!o||typeof o!="object")&&(o={}),o=re(o),be=zo.indexOf(o.PARSER_MEDIA_TYPE)===-1?Ho:o.PARSER_MEDIA_TYPE,T=be==="application/xhtml+xml"?Lt:ct,v=z(o,"ALLOWED_TAGS")?g({},o.ALLOWED_TAGS,T):Bt,E=z(o,"ALLOWED_ATTR")?g({},o.ALLOWED_ATTR,T):Gt,At=z(o,"ALLOWED_NAMESPACES")?g({},o.ALLOWED_NAMESPACES,Lt):Uo,xt=z(o,"ADD_URI_SAFE_ATTR")?g(re(Zt),o.ADD_URI_SAFE_ATTR,T):Zt,Xt=z(o,"ADD_DATA_URI_TAGS")?g(re(Jt),o.ADD_DATA_URI_TAGS,T):Jt,ue=z(o,"FORBID_CONTENTS")?g({},o.FORBID_CONTENTS,T):Yt,we=z(o,"FORBID_TAGS")?g({},o.FORBID_TAGS,T):{},ut=z(o,"FORBID_ATTR")?g({},o.FORBID_ATTR,T):{},pe=z(o,"USE_PROFILES")?o.USE_PROFILES:!1,Kt=o.ALLOW_ARIA_ATTR!==!1,mt=o.ALLOW_DATA_ATTR!==!1,qt=o.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=o.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_e=o.SAFE_FOR_TEMPLATES||!1,gt=o.SAFE_FOR_XML!==!1,te=o.WHOLE_DOCUMENT||!1,le=o.RETURN_DOM||!1,Je=o.RETURN_DOM_FRAGMENT||!1,Ze=o.RETURN_TRUSTED_TYPE||!1,ft=o.FORCE_BODY||!1,Vt=o.SANITIZE_DOM!==!1,$t=o.SANITIZE_NAMED_PROPS||!1,ht=o.KEEP_CONTENT!==!1,Ae=o.IN_PLACE||!1,Ht=o.ALLOWED_URI_REGEXP||Ro,me=o.NAMESPACE||j,tt=o.MATHML_TEXT_INTEGRATION_POINTS||tt,ot=o.HTML_INTEGRATION_POINTS||ot,r=o.CUSTOM_ELEMENT_HANDLING||{},o.CUSTOM_ELEMENT_HANDLING&&Qt(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(r.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&Qt(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(r.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(r.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_e&&(mt=!1),Je&&(le=!0),pe&&(v=g({},To),E=[],pe.html===!0&&(g(v,vo),g(E,Eo)),pe.svg===!0&&(g(v,Dt),g(E,Ft),g(E,at)),pe.svgFilters===!0&&(g(v,Mt),g(E,Ft),g(E,at)),pe.mathMl===!0&&(g(v,Ot),g(E,ko),g(E,at))),o.ADD_TAGS&&(v===Bt&&(v=re(v)),g(v,o.ADD_TAGS,T)),o.ADD_ATTR&&(E===Gt&&(E=re(E)),g(E,o.ADD_ATTR,T)),o.ADD_URI_SAFE_ATTR&&g(xt,o.ADD_URI_SAFE_ATTR,T),o.FORBID_CONTENTS&&(ue===Yt&&(ue=re(ue)),g(ue,o.FORBID_CONTENTS,T)),ht&&(v["#text"]=!0),te&&g(v,["html","head","body"]),v.table&&(g(v,["tbody"]),delete we.tbody),o.TRUSTED_TYPES_POLICY){if(typeof o.TRUSTED_TYPES_POLICY.createHTML!="function")throw Le('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof o.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Le('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');c=o.TRUSTED_TYPES_POLICY,u=c.createHTML("")}else c===void 0&&(c=ws($,i)),c!==null&&typeof u=="string"&&(u=c.createHTML(""));D&&D(o),ge=o}},eo=g({},[...Dt,...Mt,...cs]),to=g({},[...Ot,..._s]),Go=function(o){let a=Y(o);(!a||!a.tagName)&&(a={namespaceURI:me,tagName:"template"});let _=ct(o.tagName),x=ct(a.tagName);return At[o.namespaceURI]?o.namespaceURI===et?a.namespaceURI===j?_==="svg":a.namespaceURI===Qe?_==="svg"&&(x==="annotation-xml"||tt[x]):!!eo[_]:o.namespaceURI===Qe?a.namespaceURI===j?_==="math":a.namespaceURI===et?_==="math"&&ot[x]:!!to[_]:o.namespaceURI===j?a.namespaceURI===et&&!ot[x]||a.namespaceURI===Qe&&!tt[x]?!1:!to[_]&&(Wo[_]||!eo[_]):!!(be==="application/xhtml+xml"&&At[o.namespaceURI]):!1},B=function(o){Ie(e.removed,{element:o});try{Y(o).removeChild(o)}catch{lt(o)}},st=function(o,a){try{Ie(e.removed,{attribute:a.getAttributeNode(o),from:a})}catch{Ie(e.removed,{attribute:null,from:a})}if(a.removeAttribute(o),o==="is")if(le||Je)try{B(a)}catch{}else try{a.setAttribute(o,"")}catch{}},oo=function(o){let a=null,_=null;if(ft)o="<remove></remove>"+o;else{let k=yo(o,/^[\r\n\t ]+/);_=k&&k[0]}be==="application/xhtml+xml"&&me===j&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");let x=c?c.createHTML(o):o;if(me===j)try{a=new ce().parseFromString(x,be)}catch{}if(!a||!a.documentElement){a=d.createDocument(me,"template",null);try{a.documentElement.innerHTML=wt?u:x}catch{}}let N=a.body||a.documentElement;return o&&_&&N.insertBefore(t.createTextNode(_),N.childNodes[0]||null),me===j?I.call(a,te?"html":"body")[0]:te?a.documentElement:N},so=function(o){return h.call(o.ownerDocument||o,o,q.SHOW_ELEMENT|q.SHOW_COMMENT|q.SHOW_TEXT|q.SHOW_PROCESSING_INSTRUCTION|q.SHOW_CDATA_SECTION,null)},St=function(o){return o instanceof ae&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof $e)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function"||typeof o.hasChildNodes!="function")},no=function(o){return typeof S=="function"&&o instanceof S};function V(l,o,a){it(l,_=>{_.call(e,o,a,ge)})}let ro=function(o){let a=null;if(V(m.beforeSanitizeElements,o,null),St(o))return B(o),!0;let _=T(o.nodeName);if(V(m.uponSanitizeElement,o,{tagName:_,allowedTags:v}),o.hasChildNodes()&&!no(o.firstElementChild)&&L(/<[/\w]/g,o.innerHTML)&&L(/<[/\w]/g,o.textContent)||o.nodeType===Me.progressingInstruction||gt&&o.nodeType===Me.comment&&L(/<[/\w]/g,o.data))return B(o),!0;if(!v[_]||we[_]){if(!we[_]&&ao(_)&&(r.tagNameCheck instanceof RegExp&&L(r.tagNameCheck,_)||r.tagNameCheck instanceof Function&&r.tagNameCheck(_)))return!1;if(ht&&!ue[_]){let x=Y(o)||o.parentNode,N=pt(o)||o.childNodes;if(N&&x){let k=N.length;for(let F=k-1;F>=0;--F){let G=Ye(N[F],!0);G.__removalCount=(o.__removalCount||0)+1,x.insertBefore(G,Xe(o))}}}return B(o),!0}return o instanceof C&&!Go(o)||(_==="noscript"||_==="noembed"||_==="noframes")&&L(/<\/no(script|embed|frames)/i,o.innerHTML)?(B(o),!0):(_e&&o.nodeType===Me.text&&(a=o.textContent,it([P,A,H],x=>{a=Re(a,x," ")}),o.textContent!==a&&(Ie(e.removed,{element:o.cloneNode()}),o.textContent=a)),V(m.afterSanitizeElements,o,null),!1)},io=function(o,a,_){if(Vt&&(a==="id"||a==="name")&&(_ in t||_ in Bo))return!1;if(!(mt&&!ut[a]&&L(ee,a))){if(!(Kt&&L(U,a))){if(!E[a]||ut[a]){if(!(ao(o)&&(r.tagNameCheck instanceof RegExp&&L(r.tagNameCheck,o)||r.tagNameCheck instanceof Function&&r.tagNameCheck(o))&&(r.attributeNameCheck instanceof RegExp&&L(r.attributeNameCheck,a)||r.attributeNameCheck instanceof Function&&r.attributeNameCheck(a))||a==="is"&&r.allowCustomizedBuiltInElements&&(r.tagNameCheck instanceof RegExp&&L(r.tagNameCheck,_)||r.tagNameCheck instanceof Function&&r.tagNameCheck(_))))return!1}else if(!xt[a]){if(!L(Ht,Re(_,zt,""))){if(!((a==="src"||a==="xlink:href"||a==="href")&&o!=="script"&&ns(_,"data:")===0&&Xt[o])){if(!(qt&&!L(xe,Re(_,zt,"")))){if(_)return!1}}}}}}return!0},ao=function(o){return o!=="annotation-xml"&&yo(o,Oo)},co=function(o){V(m.beforeSanitizeAttributes,o,null);let{attributes:a}=o;if(!a||St(o))return;let _={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:E,forceKeepAttr:void 0},x=a.length;for(;x--;){let N=a[x],{name:k,namespaceURI:F,value:G}=N,Se=T(k),R=k==="value"?G:rs(G);if(_.attrName=Se,_.attrValue=R,_.keepAttr=!0,_.forceKeepAttr=void 0,V(m.uponSanitizeAttribute,o,_),R=_.attrValue,$t&&(Se==="id"||Se==="name")&&(st(k,o),R=Fo+R),gt&&L(/((--!?|])>)|<\/(style|title)/i,R)){st(k,o);continue}if(_.forceKeepAttr||(st(k,o),!_.keepAttr))continue;if(!jt&&L(/\/>/i,R)){st(k,o);continue}_e&&it([P,A,H],lo=>{R=Re(R,lo," ")});let _o=T(o.nodeName);if(io(_o,Se,R)){if(c&&typeof $=="object"&&typeof $.getAttributeType=="function"&&!F)switch($.getAttributeType(_o,Se)){case"TrustedHTML":{R=c.createHTML(R);break}case"TrustedScriptURL":{R=c.createScriptURL(R);break}}try{F?o.setAttributeNS(F,k,R):o.setAttribute(k,R),St(o)?B(o):So(e.removed)}catch{}}}V(m.afterSanitizeAttributes,o,null)},Ko=function l(o){let a=null,_=so(o);for(V(m.beforeSanitizeShadowDOM,o,null);a=_.nextNode();)V(m.uponSanitizeShadowNode,a,null),ro(a),co(a),a.content instanceof p&&l(a.content);V(m.afterSanitizeShadowDOM,o,null)};return e.sanitize=function(l){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=null,_=null,x=null,N=null;if(wt=!l,wt&&(l="<!-->"),typeof l!="string"&&!no(l))if(typeof l.toString=="function"){if(l=l.toString(),typeof l!="string")throw Le("dirty is not a string, aborting")}else throw Le("toString is not a function");if(!e.isSupported)return l;if(dt||bt(o),e.removed=[],typeof l=="string"&&(Ae=!1),Ae){if(l.nodeName){let G=T(l.nodeName);if(!v[G]||we[G])throw Le("root node is forbidden and cannot be sanitized in-place")}}else if(l instanceof S)a=oo("<!---->"),_=a.ownerDocument.importNode(l,!0),_.nodeType===Me.element&&_.nodeName==="BODY"||_.nodeName==="HTML"?a=_:a.appendChild(_);else{if(!le&&!_e&&!te&&l.indexOf("<")===-1)return c&&Ze?c.createHTML(l):l;if(a=oo(l),!a)return le?null:Ze?u:""}a&&ft&&B(a.firstChild);let k=so(Ae?l:a);for(;x=k.nextNode();)ro(x),co(x),x.content instanceof p&&Ko(x.content);if(Ae)return l;if(le){if(Je)for(N=y.call(a.ownerDocument);a.firstChild;)N.appendChild(a.firstChild);else N=a;return(E.shadowroot||E.shadowrootmode)&&(N=O.call(s,N,!0)),N}let F=te?a.outerHTML:a.innerHTML;return te&&v["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&L(Lo,a.ownerDocument.doctype.name)&&(F="<!DOCTYPE "+a.ownerDocument.doctype.name+`>
`+F),_e&&it([P,A,H],G=>{F=Re(F,G," ")}),c&&Ze?c.createHTML(F):F},e.setConfig=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bt(l),dt=!0},e.clearConfig=function(){ge=null,dt=!1},e.isValidAttribute=function(l,o,a){ge||bt({});let _=T(l),x=T(o);return io(_,x,a)},e.addHook=function(l,o){typeof o=="function"&&Ie(m[l],o)},e.removeHook=function(l,o){if(o!==void 0){let a=os(m[l],o);return a===-1?void 0:ss(m[l],a,1)[0]}return So(m[l])},e.removeHooks=function(l){m[l]=[]},e.removeAllHooks=function(){m=Po()},e}var _t=Do();var X=class n{static formatUrl(e){let s=/^[a-z]+:\/\//.test(e)?e:`//${e}`;return encodeURI(s)}static escape(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,s=>{if(!t[s])throw new Error;return t[s]})}static toDom(e){let t=document.createElement("template");return t.innerHTML=_t.sanitize(e),t.content}static toElement(e){return n.toDom(e).firstElementChild}static _getNode(e){let t=typeof e=="string"?document.querySelector(e):e;return t instanceof Element?t:(console.warn(`${t} is not an Element.`),console.trace(),null)}static inner(e,t){let s=n._getNode(e);return s&&(s.innerHTML=_t.sanitize(t)),s}static replace(e,t){let s=n._getNode(e);if(!s)return null;let i=n.toDom(t),p=i.firstElementChild;return s.replaceWith(i),p}static wrap(e,t,s=t){let i=n._getNode(t);if(!i)return null;let p=s===null?i.parentElement?.lastElementChild??null:n._getNode(s),f=[i];for(let C=i;C.nextElementSibling!==null&&C!==p;C=C.nextElementSibling)f.push(C.nextElementSibling);let S=n.toElement(e);return S?(i.replaceWith(S),S.append(...f),S):null}static _adjacent(e,t,s){let i=n._getNode(e);return i&&i.insertAdjacentHTML(t,_t.sanitize(s)),i}static beforeBegin(e,t){e&&n._adjacent(e,"beforebegin",t)}static afterBegin(e,t){e&&n._adjacent(e,"afterbegin",t)}static beforeEnd(e,t){e&&n._adjacent(e,"beforeend",t)}static afterEnd(e,t){e&&n._adjacent(e,"afterend",t)}};var Oe=class extends oe{apply(){X.afterEnd(document.querySelector("#your_slots").parentElement,'<div id="your_slots_count" class="trade_item_box"><span id="your_items_count"></span></div>'),X.afterEnd(document.querySelector("#their_slots").parentElement,'<div id="their_slots_count" class="trade_item_box"><span id="their_items_count"></span></div>'),new MutationObserver(e=>{for(let t of e)for(let s of t.addedNodes){if(!s.classList||!s.classList.contains("item"))continue;let i=document.querySelector("#your_items_count"),p=document.querySelector("#their_items_count"),f=document.querySelectorAll("#your_slots .has_item").length;f>0?(i.textContent=Ne(f===1?Ct:Pt,{num:f}),document.querySelector("#your_slots_count").style.display="block"):document.querySelector("#your_slots_count").style.display="none";let S=document.querySelectorAll("#their_slots .has_item").length;S>0?(p.textContent=Ne(S===1?Ct:Pt,{num:S}),document.querySelector("#their_slots_count").style.display="block"):document.querySelector("#their_slots_count").style.display="none",f===S?(i.className="es_same",p.className="es_same"):f>S?(i.className="es_higher",p.className="es_lower"):(i.className="es_lower",p.className="es_higher")}}).observe(document,{subtree:!0,childList:!0})}};var Fe=class extends oe{apply(){X.beforeEnd(document.querySelector(".error_page_links"),`<div class="black_square_btn" id="back_to_tradeoffers_btn"> <a href="https://steamcommunity.com/my/tradeoffers"><div class="cap left"></div><div class="cap right"></div>${Ne(go)}</a></div>`)}};var Ue=class extends ve{constructor(e){let t=document.querySelector(".error_page_links")!==null;super(e,mo.TRADE_OFFER,t?[Fe]:[Oe])}};var We=class{static{this.currentContext=0}static set CurrentContext(e){this.currentContext=e}static isBackgroundScript(){return this.currentContext===1}static isContentScript(){return this.currentContext===2}static isOptions(){return this.currentContext===3}};var ze=class{static load(){if(this.cache=new Map,!We.isBackgroundScript()&&typeof document<"u")for(let[e,t]of document.cookie.split(";").map(s=>s.split("=",2)))e=e.trim(),this.cache.set(e,decodeURIComponent(t))}static get(e,t=null){return this.cache===null&&this.load(),this.cache.get(e.trim())??t}};var He=class{constructor(e){this.config=e}createFromLegacy(){if(this.config.language)return new K(this.config.language);for(let t of document.querySelectorAll("script[src]")){let s=new URL(t.src).searchParams.get("l");if(s)return new K(s)}let e=ze.get("Steam_Language",null);return e?new K(e):null}createFromReact(){return this.config.language?new K(this.config.language):null}};var J=class{static getVariable(e,t){if(typeof e=="string"){let s=e.match(t);return s&&s[1]?s[1]:null}for(let s of e.querySelectorAll("script"))if(s.textContent){let i=s.textContent.match(t);if(i)return i&&i[1]?i[1]:null}return null}static getStringVariable(e,t=document){let s=typeof e=="string"?new RegExp(`${e}\\s*=\\s*['"](.+?)['"];`):e;return this.getVariable(t,s)}static getIntVariable(e,t=document){let s=typeof e=="string"?new RegExp(`${e}\\s*=\\s*(.+?);`):e,i=this.getVariable(t,s);return i?Number(i):null}static getArrayVariable(e,t=document){let s=typeof e=="string"?new RegExp(`${e}\\s*=\\s*(\\[.+?]);`):e,i=this.getVariable(t,s);return i?JSON.parse(i):null}static getObjectVariable(e,t=document){let s=typeof e=="string"?new RegExp(`${e}\\s*=\\s*(\\{.+?});`):e,i=this.getVariable(t,s);return i?JSON.parse(i):null}};var Z=class{static fetchBadgeInfo(e,t){return b.send("community.badgeinfo",{steamId:e,appid:t})}static getWorkshopFileSize(e,t){return b.send("community.workshopFileSize",{id:e,preventFetch:t})}static getReviews(e,t){return b.send("community.reviews",{steamId:e,pages:t})}static login(e){return b.send("community.login",{profilePath:e})}static logout(e=void 0){return b.send("community.logout",{force:e})}static setStoreCountry(e){return b.send("community.storecountry.set",{newCountry:e})}static getStoreCountry(){return b.send("community.storecountry.get")}};var Be=class n{static{this._fetchFn=typeof content<"u"&&content&&content.fetch||fetch.bind(window)}static async getHttp(e,t={}){let s={method:"GET",credentials:"include",headers:{origin:window.location.origin},referrer:window.location.origin+window.location.pathname,cache:"default",...t};document.dispatchEvent(new CustomEvent("asRequestStart"));let i;try{if(i=await n._fetchFn(e,s),!i.ok)throw new ye.HTTPError(i.status,`HTTP ${i.status} ${i.statusText} for ${i.url}`)}catch(p){throw document.dispatchEvent(new CustomEvent("asRequestError",{detail:p})),p}return document.dispatchEvent(new CustomEvent("asRequestDone")),i}static async getText(e,t={}){return(await this.getHttp(e,t)).text()}static async getJson(e,t={}){return(await this.getHttp(e,t)).json()}static async getBlob(e,t={}){return(await this.getHttp(e,t)).blob()}static async post(e,t,s={}){let i={method:"POST",body:new URLSearchParams(t),credentials:"include",headers:{origin:window.location.origin},referrer:window.location.origin+window.location.pathname,...s};return await n._fetchFn(e,i)}};var Ge=class{constructor(){this._signedIn=!1}set isSignedIn(e){this._signedIn=e}get isSignedIn(){return this._signedIn}set steamId(e){this._steamId=e}get steamId(){return this._steamId}set storeCountry(e){this._storeCountry=e}get storeCountry(){let e,t=new URLSearchParams(window.location.search);return t.has("cc")?e=t.get("cc"):e=this._storeCountry,e||(console.warn("Failed to detect store country, falling back to US"),e="US"),e}set profileUrl(e){this._profileUrl=e}get profileUrl(){return this._profileUrl}set profilePath(e){this._profilePath=e}get profilePath(){return this._profilePath}get sessionId(){return this._sessionId||(this._sessionId=J.getStringVariable("g_sessionID")),this._sessionId}async getWebApiToken(){if(!this._webApiToken){let e=await Be.getJson(`${window.location.origin}/pointssummary/ajaxgetasyncconfig`);if(!e.success||!e.data?.webapi_token)throw new Error("Failed to get webapi token");this._webApiToken=e.data.webapi_token}return this._webApiToken}};var Ke=class{constructor(){this._signedIn=!1}get isSignedIn(){return!!this._steamId}set steamId(e){this._steamId=e}get steamId(){return this._steamId}set storeCountry(e){this._storeCountry=e}get storeCountry(){return this._storeCountry}get profileUrl(){return`https://steamcommunity.com${this.profilePath}`}get profilePath(){return`/profiles/${this.steamId}/`}get sessionId(){throw new Error("Not supported")}set webApiToken(e){this._webApiToken=e}async getWebApiToken(){return this._webApiToken}};var qe=class{constructor(e){this.appConfig=e}async createFromLegacy(){let e=new Ge,t=document.querySelector("#global_actions > a.user_avatar");try{if(t){e.profileUrl=t.href,e.profilePath=t.pathname;let s=await Z.login(e.profilePath);e.isSignedIn=!0,e.steamId=s.steamId}else await Z.logout()}catch(s){console.log(s)}try{let s=await Z.getStoreCountry();if(s)return e.storeCountry=s,e;let i=null,p=document.querySelector("#webui_config, #application_config");if(p?i=p.dataset.config?JSON.parse(p.dataset.config).COUNTRY:null:window.location.hostname==="steamcommunity.com"?i=J.getStringVariable("g_strCountryCode"):i=J.getStringVariable(/GDynamicStore\.Init\(.+?,\s*'([A-Z]{2})'/),!i)throw new Error("Script with user store country not found");e.storeCountry=i,await Z.setStoreCountry(i)}catch(s){console.group("Store country detection"),console.warn("Failed to detect store country from page"),console.error(s),console.groupEnd()}return e}async createFromReact(){let e=new Ke;return this.appConfig.steamId&&this.appConfig.steamId!=="0"&&(e.steamId=this.appConfig.steamId),e.storeCountry=this.appConfig.countryCode,this.appConfig.webApiToken&&(e.webApiToken=this.appConfig.webApiToken),e}};var Mo=de(se());var je=class{static selectLastNode(e,t){let s=e.querySelectorAll(t);return s[s.length-1]??null}static insertRemoteStylesheet(e){let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.head.appendChild(t)}static insertStylesheet(e){let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=ne.getURL(e),document.head.appendChild(t)}static insertCSS(e){let t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}static insertScript(e,t=void 0){let s=document.createElement("script");s.src=Mo.default.runtime.getURL(e),s.onload=function(){this.remove()},t&&(s.dataset.params=JSON.stringify(t)),(document.head||document.documentElement).appendChild(s)}};var w=class{static{this.id=0}static dispatchEvent(e,t,s=[],i=void 0){je.insertScript("scriptlets/event.js",{handler:e,detail:{action:t,params:s,id:i}})}static call(e,t,s=[]){this.dispatchEvent(e,t,s)}static get(e,t,s=[]){return new Promise(i=>{let p=`as_msg_${this.id++}`;document.addEventListener(p,f=>i(f.detail),{once:!0}),this.dispatchEvent(e,t,s,p)})}};var ie=class{static global(e){return w.get("as_SteamFacade","global",[e])}static globalExists(e){return w.get("as_SteamFacade","globalExists",[e])}static globalSet(e,t){w.call("as_SteamFacade","globalSet",[e,t])}static showDialog(e,t,s){w.call("as_SteamFacade","showDialog",[e,t,s])}static showConfirmDialog(e,t,s={}){return w.get("as_SteamFacade","showConfirmDialog",[e,t,s.okButton??null,s.cancelButton??null,s.secondaryActionButton??null,s.explicitConfirm??!1,s.explicitDismissal??!1])}static showAlertDialog(e,t,s){return w.get("as_SteamFacade","showAlertDialog",[e,t,s])}static showBlockingWaitDialog(e,t){return w.get("as_SteamFacade","showBlockingWaitDialog",[e,t])}static dismissActiveModal(e){w.call("as_SteamFacade","dismissActiveModal",[e])}static showMenu(e,t,s,i,p){w.call("as_SteamFacade","showMenu",[e,t,s,i,p])}static hideMenu(e,t){w.call("as_SteamFacade","hideMenu",[e,t])}static changeLanguage(e,t){w.call("as_SteamFacade","changeLanguage",[e,t])}static collapseLongStrings(e){w.call("as_SteamFacade","collapseLongStrings",[e])}static removeFromWishlist(e,t,s,i,p,f){w.call("as_SteamFacade","removeFromWishlist",[e,t,s,i,p,f])}static addToWishlist(e,t,s,i,p,f){w.call("as_SteamFacade","addToWishlist",[e,t,s,i,p,f])}static bindAutoFlyoutEvents(){w.call("as_SteamFacade","bindAutoFlyoutEvents")}static vTooltip(e,t=!1){w.call("as_SteamFacade","vTooltip",[e,t])}static calculateFeeAmount(e,t){return w.get("as_SteamFacade","calculateFeeAmount",[e,t])}static vCurrencyFormat(e,t){return w.get("as_SteamFacade","vCurrencyFormat",[e,t])}static openFriendChatInWebChat(e,t){w.call("as_SteamFacade","openFriendChatInWebChat",[e,t])}static submitGuide(){w.call("as_SteamFacade","submitGuide")}};var he=class{constructor(e){this.language=e.language,this.countryCode=e.countryCode,this.webApiToken=e.webApiToken,this.steamId=e.steamId}};var Ve=class{createFromLegacy(){let e=document.querySelector("#application_config"),t={};if(e?.dataset.config){let s=JSON.parse(e.dataset.config);t.language=s.LANGUAGE,t.countryCode=s.COUNTRY}if(e?.dataset.store_user_config){let s=JSON.parse(e.dataset.store_user_config);t.webApiToken=s.webapi_token}return new he(t)}async createFromReact(){let[e,t,s]=await Promise.all([ie.global("SSR.loaderData"),ie.global("Config"),ie.global("UserConfig")]),i={language:t.LANGUAGE,countryCode:t.COUNTRY};if(Array.isArray(e)&&e[0])for(let p of e)p=JSON.parse(p),p.strWebAPIToken&&(i.webApiToken=p.strWebAPIToken),p.storeBrowseContext&&p.steamid&&(i.steamId=p.steamid);return new he(i)}};(async function(){let n=new Ve().createFromLegacy(),e=new He(n).createFromLegacy(),t=await new qe(n).createFromLegacy();try{await ke.init(),await fe.init(e)}catch(i){console.group("Augmented Steam initialization"),console.error("Failed to initialize Augmented Steam"),console.error(i),console.groupEnd();return}await new Ue({language:e,user:t}).applyFeatures()})();})();
/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE *)
*/
//# sourceMappingURL=trade_offer.js.map
