const MILLENNIUM_IS_CLIENT_MODULE=!0,pluginName="achievement-groups";function InitializePlugins(){var e,t;let n;(e=window.PLUGIN_LIST||(window.PLUGIN_LIST={}))[pluginName]||(e[pluginName]={}),(t=window.MILLENNIUM_PLUGIN_SETTINGS_STORE||(window.MILLENNIUM_PLUGIN_SETTINGS_STORE={}))[pluginName]||(t[pluginName]={}),window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS||(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS={}),function(e){e[e.CallServerMethod=0]="CallServerMethod"}(n||(n={}));let a=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName],r=`Millennium.Internal.IPC.[${pluginName}]`;const o={DropDown:["string","number","boolean"],NumberTextInput:["number"],StringTextInput:["string"],FloatTextInput:["number"],CheckBox:["boolean"],NumberSlider:["number"],FloatSlider:["number"]};function l(e,t,a){return MILLENNIUM_BACKEND_IPC.postMessage(n.CallServerMethod,{pluginName:e,methodName:"__builtins__.__update_settings_value__",argumentList:{name:t,value:a}})}a.ignoreProxyFlag=!1,async function(){for(;"undefined"==typeof MainWindowBrowserManager;)await new Promise(e=>setTimeout(e,0));MainWindowBrowserManager?.m_browser?.on("message",(e,t)=>{if(e!==r)return;const{name:n,value:o}=JSON.parse(t);a.ignoreProxyFlag=!0,a.settingsStore[n]=o,l(pluginName,n,o),a.ignoreProxyFlag=!1})}();const s=e=>new Proxy(e,{set(e,t,n){if(!(t in e))throw new TypeError(`Property ${String(t)} does not exist on plugin settings`);const s=o[e[t].type],i=e[t]?.range;if(s.includes("number")&&"number"==typeof n&&(i&&(n=function(e,t,n){return Math.max(t,Math.min(n,e))}(n,i[0],i[1])),n||(n=0)),!s.includes(typeof n))throw new TypeError(`Expected ${s.join(" or ")}, got ${typeof n}`);return e[t].value=n,((e,t)=>{a.ignoreProxyFlag||(l(pluginName,e,t),"undefined"!=typeof MainWindowBrowserManager&&MainWindowBrowserManager?.m_browser?.PostMessage(r,JSON.stringify({name:e,value:t})))})(String(t),n),!0},get:(e,t)=>"__raw_get_internals__"===t?e:t in e?e[t].value:void 0});a.DefinePluginSetting=s,a.settingsStore=s({})}InitializePlugins();const __call_server_method__=(e,t)=>Millennium.callServerMethod(pluginName,e,t),__wrapped_callable__=e=>MILLENNIUM_API.callable(__call_server_method__,e);let PluginEntryPointMain=function(){return function(e,t,n){"use strict";let a;const r="achievement_hunters_plugin_dir",o=__wrapped_callable__("GetPluginDir"),l="steam-hunters-main-css";async function s(e){const n="steam-hunters-css-loading";if(e.getElementById(l)||e.body.classList.contains(n))return;e.body.classList.add(n);let r=await fetch((o="/achievements.css",o.startsWith("/")?`${a}${o}`:`${a}/${o}`)).then(async e=>e.text());var o;[...r.matchAll(/\.__(\w+)__/g)].forEach(e=>{if(void 0===e[1])return;const n=t.findClass(e[1]);r=r.replaceAll(e[0],`.${n}`)});const s=e.createElement("style");s.innerHTML=r,s.id=l,e.head.appendChild(s),e.body.classList.remove(n)}const i="steamhunters_cache",c="steamhunter_default_settings";function u(){const e=localStorage.getItem(i);return null!==e?JSON.parse(e):{}}function m(e){localStorage.setItem(i,JSON.stringify(e))}function d(){const e=localStorage.getItem(c);return null!==e?JSON.parse(e):null}const p={groups:__wrapped_callable__("RequestAchievementGroups"),achievements:__wrapped_callable__("RequestAchievements"),gameInfo:__wrapped_callable__("RequestSteamGameInfo"),updates:__wrapped_callable__("RequestAchievementUpdates")};async function g(e,t,n){const a=function(e,t){try{const n=u(),a=n[e];if(!a)return null;const r=a[t];return r?Date.now()-r.timestamp>6048e5?(delete a[t],0===Object.keys(a).length&&delete n[e],m(n),null):r.data:null}catch(e){return console.error("Error reading from cache:",e),null}}(e,n);if(null!==a)return a;const r=await t({appId:e});let o;try{o=JSON.parse(r)}catch(e){throw new Error(`Failed to parse ${n} response: ${e}\n${r}`)}if(!o)throw new Error(`Invalid ${n} response: ${JSON.stringify(o)}`);return void 0!==o.error&&function(e,t){if(e.includes("timed out"))throw new Error(`Timed out getting ${t}. Check if website is up. ${e}`);throw new Error(e)}(o.error,n),function(e,t,n){try{const a=u();a[e]??={},a[e][t]={data:n,timestamp:Date.now()},m(a)}catch(e){console.error("Error writing to cache:",e)}}(e,n,o),o}async function h(e){return g(e,p.groups,"groups").then(e=>e.groups)}async function f(e){return g(e,p.achievements,"achievements")}async function E(e){return g(e,p.gameInfo,"gameInfo")}t.findModuleByExport(e=>e?.toString?.().includes("bleedGlyphs")).JZ;const v=t.findModuleExport(e=>void 0!==e?.toString&&t.createPropListRegex(["children"]).test(e.toString())&&/tooltipProps:\w/.test(e.toString())),w=t.findModuleByExport(e=>e?.toString?.().includes("strEnterKeyLabel")&&e.toString().includes("refKeyboardHandle")),_=Object.values(w).find(e=>e?.toString?.().includes("forwardRef")&&!e.toString().includes("virtualKeyboardProps"))("div")??(e=>e.children);function N(){return n.createElement("i",{className:"points-icon",style:{height:"0.8em",display:"flex"}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",style:{height:"100%"}},n.createElement("path",{d:"M16.23,18L12,15.45L7.77,18L8.89,13.19L5.16,9.96L10.08,9.54L12,5L13.92,9.53L18.84,9.95L15.11,13.18L16.23,18M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})))}function y(){return n.createElement("i",{className:"achievement-icon",style:{height:"25px",display:"flex"}},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"_1uKlfc1_Z49lxRNSctgO7y",viewBox:"0 0 36 36"},n.createElement("path",{fill:"url(#b)",stroke:"url(#a)",strokeWidth:"1.5",d:"m10.178 10.026.215-.22V5.529H14.6l.22-.224L18 2.07l3.18 3.234.22.224h4.207v4.279l.215.219 2.733 2.78-2.733 2.78-.215.218v4.279H21.4l-.22.225L18 23.54l-3.18-3.233-.22-.225h-4.207v-4.279l-.215-.219-2.733-2.78 2.733-2.78Zm4.562 18.006-3.18 5.39-1.708-3.475-.206-.42H6.295l2.39-4.166h3.43l2.625 2.67Zm12.081 1.496h-.467l-.206.419-1.708 3.475-3.18-5.39 2.626-2.67h3.43l2.39 4.166H26.82Z"}),n.createElement("circle",{cx:"18",cy:"13",r:"5.5",fill:"#FFC82C",stroke:"#FFAB2C"}),n.createElement("defs",null,n.createElement("linearGradient",{id:"b",x1:"7.08",x2:"33.669",y1:"3.72",y2:"25.07",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#0056D6"}),n.createElement("stop",{offset:"1",stopColor:"#1A9FFF"})),n.createElement("linearGradient",{id:"a",x1:"7.08",x2:"33.669",y1:"3.72",y2:"25.07",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#0056D6"}),n.createElement("stop",{offset:"1",stopColor:"#1A9FFF"})))))}var S,b,I;function C(e){return e<5?"Legendary":e<10?"Epic":e<20?"Rare":e<50?"Uncommon":"Common"}function L({achievement:e,sortedBy:t}){const a=C(e.localPercentage),r=t===b.Steam?e.localPercentage:e.steamPercentage;return n.createElement(n.Fragment,null,n.createElement("strong",{className:`steam-hunters-percentage ${a}`},a),n.createElement("br",null),n.createElement("span",null,r.toFixed(1),"% on ",t===b.Steam?"Steam Hunters":"Steam"),n.createElement("div",{className:"steam-hunters-tooltip-arrow"}))}function P({achievement:e,sortedBy:t,showPoints:a=!0}){const r=n.useRef(null),o=new MouseEvent("mouseover",{bubbles:!0}),l=new MouseEvent("mouseout",{bubbles:!0}),s=C(e.localPercentage),i=t===b.Steam?e.steamPercentage:e.localPercentage;return n.createElement(_,{onOKActionDescription:null,onGamepadFocus:()=>{r.current?.dispatchEvent(o)},onGamepadBlur:()=>{r.current?.dispatchEvent(l)}},n.createElement("div",{className:"achievement-item"},n.createElement("div",{className:"left"},n.createElement("img",{className:"achievement-image",alt:e.name,src:e.strImage})),n.createElement("div",{className:"center"},n.createElement("div",{className:"achievement-progress "+(e.unlocked?"unlocked":"locked"),style:{width:`${i}%`}}),n.createElement("div",{className:"achievement-content"},n.createElement("h3",null,e.name),n.createElement("p",null,e.description)),n.createElement("div",{className:"right"},n.createElement("div",{className:"achievement-stats"},a&&n.createElement("span",{className:"points"},e.points,n.createElement(N,null)),n.createElement(v,{toolTipContent:n.createElement(L,{achievement:e,sortedBy:t}),direction:"top",nDelayShowMS:0,strTooltipClassname:"steam-hunters-percentage-tooltip"},n.createElement("span",{className:`steam-hunters-percentage ${s}`,ref:r},`${i.toFixed(1)}%`))),n.createElement("div",null,e.unlockedDate&&n.createElement("span",{className:"unlocked-date"},e.unlockedDate.toLocaleDateString()))))))}function M({groupInfo:e,title:a,achievements:r,totalPoints:o,isExpanded:l=!1,sortedBy:s,gameInfo:i,showPoints:c=!0,showUnlocked:u=!0,onExpandChange:m}){const[d,p]=n.useState(l);function g(){return void 0!==e.dlcAppId?void 0!==e.name?`${e.dlcAppName} — ${e.name}`:`${e.dlcAppName}`:void 0!==a?`${i.name} — ${a}`:i.name}function h(){const t=e.dlcAppId??i.appId;return StoreItemCache.GetApp(t)?.m_Assets?.m_strSmallCapsuleURL??`https://steamcdn-a.akamaihd.net/steam/apps/${t}/capsule_184x69.jpg`}n.useEffect(()=>{p(l)},[l]);const f=r.filter(e=>e.unlocked),E=f.length/r.length*100,v=f.length===r.length;return n.createElement("div",{className:"achievement-group"},n.createElement(_,{onClick:()=>{var e;p(e=!d),m(e)},onOKActionDescription:d?"Collapse":"Expand"},n.createElement("div",{className:"group-header"},n.createElement("div",{className:"group-info"},void 0!==h()&&n.createElement("img",{src:h(),alt:g(),className:"group-image",onClick:e=>{SteamClient.System.OpenInSystemBrowser(`https://steamhunters.com/apps/${i.appId}/achievements`),e.stopPropagation()}}),n.createElement("div",{className:"group-title"},n.createElement("h2",null,g()),n.createElement("div",{className:"progress-container "+(v?"progress-complete":""),style:{display:u&&r.length>0?"flex":"none"}},v&&n.createElement(y,null),n.createElement("div",{className:"progress-text"},n.createElement("span",null,f.length),n.createElement("span",null,"/"),n.createElement("span",null,r.length),n.createElement("span",null,` (${E.toFixed(1)}%)`)),n.createElement(t.ProgressBar,{nProgress:E})))),n.createElement("div",{className:"group-right"},n.createElement("div",{className:"group-stats"},n.createElement("span",null,`${r.length} achievements${c?` worth ${o}`:""}`,c&&n.createElement(N,null)),n.createElement("span",{className:"expand-button"},d?"▼":"▶"))))),d&&n.createElement("div",{className:"group-content"},r.map(e=>n.createElement(P,{key:e.apiName,achievement:e,sortedBy:s,showPoints:c}))))}function A({errors:e}){return n.createElement("div",{className:"steam-hunters-error-message"},n.createElement(t.IconsModule.ExclamationPoint,{style:{color:"crimson",maxWidth:"10%"}}),n.createElement("p",null,"An error occurred:",n.createElement("ul",null,e.map(e=>n.createElement("li",{key:e.message},e.message))),"Please try again later or create an issue on GitHub with your browser logs/console output attached."))}function k({settings:e,onSettingsChange:a,achievementCount:r,groupCount:o,onExpandAllClick:l,onCacheCleared:s,appId:i}){const p=n.useRef(null),g=new MouseEvent("mouseover",{bubbles:!0}),h=new MouseEvent("mouseout",{bubbles:!0}),[f,E]=n.useState(!1);return n.useEffect(()=>{p.current&&(p.current.addEventListener("vgp_onfocus",()=>{p.current?.dispatchEvent(g)}),p.current.addEventListener("vgp_onblur",()=>{p.current?.dispatchEvent(h)}))},[p]),n.useEffect(()=>{E(null!==d())},[]),n.createElement(t.Focusable,{className:"achievements-header"},n.createElement("div",{className:"css-error"},n.createElement(A,{errors:[new Error("CSS not injected page will look broken, please report!")]})),n.createElement(t.Focusable,{className:"left-controls"},n.createElement(t.Focusable,null,n.createElement("span",null,`${r} achievements grouped by (${o})`),n.createElement("div",{className:"dropdown-container",style:{width:120}},n.createElement(t.Dropdown,{rgOptions:Object.values(I).map(e=>({label:e,data:e})),selectedOption:e.groupBy,onChange:e=>{a({groupBy:e.data})},contextMenuPositionOptions:{bMatchWidth:!1}})),n.createElement("span",null,"sorted by"),n.createElement("div",{className:"dropdown-container",style:{width:90}},n.createElement(t.Dropdown,{rgOptions:Object.values(b).map(e=>({label:e,data:e})),selectedOption:e.sortBy,onChange:e=>{a({sortBy:e.data})},contextMenuPositionOptions:{bMatchWidth:!1}}))),n.createElement(t.Focusable,{className:"toggle-container"},n.createElement("div",{onClick:()=>{a({reverse:!e.reverse})}},n.createElement(t.Toggle,{value:e.reverse,onChange:e=>{a({reverse:e})}}),n.createElement("span",null,"reverse")),n.createElement("div",{onClick:()=>{a({showPoints:!e.showPoints})}},n.createElement(t.Toggle,{value:e.showPoints,onChange:e=>{a({showPoints:e})}}),n.createElement("span",null,"show points")),n.createElement("div",{onClick:()=>{a({showUnlocked:!e.showUnlocked})}},n.createElement(t.Toggle,{value:e.showUnlocked,onChange:e=>{a({showUnlocked:e})}}),n.createElement("span",null,"show unlocked")))),n.createElement(t.Focusable,{className:"right-controls"},n.createElement(v,{toolTipContent:n.createElement("span",null,f?"Reset saved default settings to standard default values":"Save current settings as default"),nDelayShowMS:100,direction:"top"},n.createElement(t.Button,{onClick:function(){f?(localStorage.removeItem(c),E(!1),a(null)):(function(e){localStorage.setItem(c,JSON.stringify(e))}(e),E(!0))},style:{width:"126px"}},f?"Reset Defaults ":"Save as Default")),n.createElement(t.Button,{onClick:l},e.expandAll?"Collapse All":"Expand All"),n.createElement("div",{className:"search-container"},n.createElement(t.TextField,{value:e.searchQuery??"",onChange:e=>{a({searchQuery:e.target.value})},placeholder:"Search achievements..."})),n.createElement(v,{toolTipContent:n.createElement(x,{appId:i}),nDelayShowMS:100,direction:"top"},n.createElement(t.Button,{onClick:()=>{!function(e){try{const t=u();delete t[e],m(t)}catch(e){console.error("Error clearing app cache:",e)}}(i),s()},ref:p},"Clear cache"))))}function x({appId:e}){return n.createElement("span",null,"Cache was last updated on",n.createElement("br",null),function(e,t="achievements"){try{const n=u()[e];if(!n)return null;const a=n[t];return a?new Date(a.timestamp):null}catch(e){return console.error("Error reading from cache:",e),null}}(e)?.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0})??"never",n.createElement("br",null),n.createElement("br",null),"Clears the SteamHunters cache for this game.",n.createElement("br",null),"Use this if achievement data seems outdated or incorrect.")}!function(e){e[e.Obtainable=0]="Obtainable",e[e.BrokenButObtainable=1]="BrokenButObtainable",e[e.ConditionallyObtainable=2]="ConditionallyObtainable",e[e.Unobtainable=3]="Unobtainable"}(S||(S={})),function(e){e.SteamHunters="SH%",e.Steam="Steam%",e.Name="Name",e.Unlocked="Unlocked",e.Default="Default"}(b||(b={})),function(e){e.DLCAndUpdate="DLC & update",e.Nothing="Nothing",e.Unlocked="Unlocked",e.DLC="DLC"}(I||(I={}));const U={groupBy:I.DLCAndUpdate,sortBy:b.SteamHunters,reverse:!1,expandAll:!0,showUnlocked:!0,showPoints:!0,searchQuery:""};function B({onSettingsChange:e,onCacheCleared:t,data:a,settings:r,appId:o}){const{groupBy:l,sortBy:s,expandAll:i}=r,c=function(e,t,n){switch(n){case I.DLCAndUpdate:return t;case I.Nothing:return[{name:void 0,achievementApiNames:e.map(e=>e.apiName)}];case I.Unlocked:return[{name:"Achieved",achievementApiNames:e.filter(e=>e.unlocked).map(e=>e.apiName)},{name:"Unachieved",achievementApiNames:e.filter(e=>!e.unlocked).map(e=>e.apiName)}];case I.DLC:{const e=t.filter(e=>void 0===e.dlcAppId),n=t.filter(e=>void 0!==e.dlcAppId);return[{name:e[0]?.name,achievementApiNames:e.flatMap(e=>e.achievementApiNames)},...n]}default:return[]}}(a.achievements,a.groups,l),[u,m]=n.useState(()=>new Set(Array.from({length:c.length},(e,t)=>t))),d=n.useMemo(()=>u.size===c.length,[u,c.length]);return n.useEffect(()=>{i!==d&&e({expandAll:d})},[d,i,e]),n.createElement(n.Fragment,null,n.createElement(k,{settings:r,onSettingsChange:e,achievementCount:a.achievements.length,groupCount:c.length,onExpandAllClick:function(){m(d?new Set:new Set(Array.from({length:c.length},(e,t)=>t)))},onCacheCleared:t,appId:o}),n.createElement("div",{className:"achievement-groups"},c.map((e,t)=>{const o=function(e,t){const{sortBy:n,reverse:a,showUnlocked:r,searchQuery:o}=t;return e.filter(e=>{if(void 0!==o){const t=o.toLowerCase();return e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)}return!0}).filter(e=>r||!e.unlocked).sort((e,t)=>{switch(n){case b.Default:return 0;case b.SteamHunters:return a?e.localPercentage-t.localPercentage:t.localPercentage-e.localPercentage;case b.Steam:return a?e.steamPercentage-t.steamPercentage:t.steamPercentage-e.steamPercentage;case b.Name:return a?t.name.localeCompare(e.name):e.name.localeCompare(t.name);case b.Unlocked:return a?(e.unlockedDate?.getTime()??1/0)-(t.unlockedDate?.getTime()??1/0):(t.unlockedDate?.getTime()??0)-(e.unlockedDate?.getTime()??0);default:return 0}})}((l=e.achievementApiNames,a.achievements.filter(e=>l.includes(e.apiName))),r);var l;const i=function(e){return e.reduce((e,t)=>e+t.points,0)}(o);return n.createElement(M,{key:t,groupInfo:e,title:e.name,achievements:o,totalPoints:i,isExpanded:u.has(t),sortedBy:s,showPoints:r.showPoints,gameInfo:a.gameInfo,onExpandChange:e=>{!function(e,t){m(n=>{const a=new Set(n);return t?a.add(e):a.delete(e),a})}(t,e)},showUnlocked:r.showUnlocked})})))}function T({appId:e}){const a=function(e){const[t,a]=n.useState([]),[r,o]=n.useState([]),[l,s]=n.useState({}),[i,c]=n.useState([]),[u,m]=n.useState(!0),[d,p]=n.useState(0),g=n.useCallback(async()=>{try{const[t,n,r,l]=await Promise.all([f(e),h(e),E(e),SteamClient.Apps.GetMyAchievementsForApp(e).then(e=>e.data.rgAchievements)]);if(!n)throw new Error("Failed to load groups");if(!t)throw new Error("Failed to load achievements");if(!r)throw new Error("Failed to load game info");const i=t.map(e=>{const t=l.find(t=>t.strID===e.apiName);return{...e,strImage:t?.strImage??"",unlocked:t?.bAchieved??!1,name:t?.strName??e.name,description:t?.strDescription??e.description,unlockedDate:0!==t?.rtUnlocked?new Date(1e3*(t?.rtUnlocked??0)):void 0}}),u=new Set(n.flatMap(e=>e.achievementApiNames)),m={name:void 0,achievementApiNames:t.filter(e=>!u.has(e.apiName)).map(e=>e.apiName)};c([]),a(i),o([m,...n]),s(r)}catch(e){console.error("Error loading achievement data:",e),c(t=>[...t,e])}finally{m(!1)}},[e]);return n.useEffect(()=>{m(!0),g()},[g,d]),{achievements:t,groups:r,gameInfo:l,errors:i,loading:u,reload:n.useCallback(()=>{p(e=>e+1)},[])}}(e),[r,o]=n.useState(()=>d()??U),l=n.createRef();return n.useEffect(()=>{l.current&&s(l.current.ownerDocument)},[]),a.errors.length>0?n.createElement(A,{errors:a.errors}):n.createElement("div",{className:"steam-hunters-achievements-page",ref:l},a.loading?n.createElement(t.Spinner,{className:"steam-hunters-spinner"}):n.createElement(B,{data:a,settings:r,onSettingsChange:function(e){o(null===e?U:t=>({...t,...e}))},onCacheCleared:function(){a.reload()},appId:e}))}const D=new Set;const F=["Achievements_","BPM_","Desktop_uid"];function $(){g_PopupManager.m_mapPopups.data_.forEach(e=>{const t=e.value_.m_strName;F.some(e=>t.includes(e))&&s(e.value_.m_popup.document)})}const O="augmented-hltb-cache";function G(e,t,n){const a=document.createElement("div");return a.classList.add("_2ZcNQxY8YknnhNa4ZvIoU4","hltb-info"),a.innerHTML=`\n        <div class="_1vYL2q-91QLy-FBzntE7E5">${e}</div>\n        <div class="_-9icu8LqT7inRSJISgnkh">\n            <a class="_2j8Xh4pPOOgF4MF6FVUI28" href="steam://openurl_external/${n}">${t}</a>\n        </div>\n    `,a}function R(e){return null!==e?`${(e/60).toFixed(1)} hrs`:"--"}let H;async function W(e){try{return(await t.Millennium.findElement(H,e))[0]??null}catch{return null}}function j(e,t){async function n(){"true"!==t.getAttribute("hltb-injected")&&(t.setAttribute("hltb-injected","true"),await async function(e){H.querySelectorAll(".hltb-info").forEach(e=>{e.remove()});const t=await W("._3cntzF30xAuwn1ARWJjvCb._1uS70KI6ZbUE94jUB27ioB");if(!t)return void console.error("[HLTB] Could not find info container.");const n=await async function(e){const t=JSON.parse(localStorage.getItem(O)??"{}");let n=t[e];if(!n||n.expiry<Date.now()){const a=await async function(e){return(await fetch(`https://api.augmentedsteam.com/app/${e}/v2`)).json()}(e);n={data:a,expiry:Date.now()+36e5},t[e]=n,localStorage.setItem(O,JSON.stringify(t))}return n.data}(e);if(null===n)return;const a=new Intl.NumberFormat;function r(){const e=H.createElement("br");return e.classList.add("hltb-info"),e}if(void 0!==n.hltb&&(t.appendChild(r()),t.appendChild(G("Main Story:",R(n.hltb.story),n.hltb.url)),t.appendChild(G("Main + Extras:",R(n.hltb.extras),n.hltb.url)),t.appendChild(G("Completionist:",R(n.hltb.complete),n.hltb.url))),void 0!==n.players){const o=`https://steamdb.info/app/${e}/charts/`;t.appendChild(r()),t.appendChild(G("Playing now:",a.format(n.players.recent),o)),t.appendChild(G("24-hour peak:",a.format(n.players.peak_today),o)),t.appendChild(G("All-time peak:",a.format(n.players.peak_all),o))}}(e))}t.addEventListener("click",n),t.addEventListener("mouseenter",n),H.querySelector("._3s6_6sN8LyrlTHc_z6VfNU")&&n()}async function J(){try{const e=await W("._3NBxSLAZLbbbnul8KfDFjw._2dzwXkCVAuZGFC-qKgo8XB"),t=(await W("._3VQUewWB8g6Z5qB4C7dGFr ._3qDWQGB0rtwM3qpXTb11Q-.Focusable .zvLq1GUCH3yLuqv_TXBJ1"))?.parentElement;if(!e||!t)return void setTimeout(J,100);if("true"===t.getAttribute("hltb-click-listener"))return void setTimeout(J,100);const n=e.src.match(/assets\/(\d+)/)?.[1];if(void 0===n)return console.error("[HLTB] Could not find app id"),void setTimeout(J,100);t.setAttribute("hltb-click-listener","true"),j(n,t),setTimeout(J,100)}catch(e){throw setTimeout(J,500),e}}return e.default=async function(){await async function(){let e=sessionStorage.getItem(r);null===e&&(e=await o(),sessionStorage.setItem(r,e));const t=`${e.replace(/.*\\([^\\]+)\\([^\\]+)$/,"/$1/$2")}/public`;a=`https://pseudo.millennium.app${t}`}(),await App.WaitForServicesInitialized(),function(e){const{name:a,onBeforeCreate:r}=e;let o,l;function s(){try{l=n.createElement,o=t.beforePatch(n,"createElement",e=>{const[t,n,...o]=e;try{r({type:t,props:n,children:o})}catch(e){console.error(`[${a}] onBeforeCreate error`,e)}}),console.debug(`[${a}] Patched React.createElement`)}catch(e){console.error(`[${a}] Failed to patch React.createElement`,e)}}s(),setInterval(()=>{o&&n.createElement!==l||(console.debug(`[${a}] Detected unpatch/swap, re-patching`),s())},1e3)}({name:"SteamHunter/AchievementGroupsTab",onBeforeCreate:({props:e})=>{!function(e){if(!e)return;const t=e.tabs;if(t&&e.onShowTab&&void 0!==e.autoFocusContents&&t.some(e=>"achievements"===e.id)&&!t.some(e=>"achievement-groups"===e.id)){if(!t[0])throw new Error("Missing tabs?");const a=String(t[0].content.props.appid);t.push({content:n.createElement(T,{appId:a}),id:"achievement-groups",title:"Achievement Groups"}),e.tabs=t,D.has(a)||(e.onShowTab("achievement-groups"),D.add(a))}}(e)}}),t.Millennium.AddWindowCreateHook&&t.Millennium.AddWindowCreateHook($),async function(){for(;void 0===H;)H=SteamUIStore.WindowStore.MainWindowInstance.m_BrowserWindow.document,await t.sleep(500);await J()}()},Object.defineProperty(e,"__esModule",{value:!0}),e}({},window.MILLENNIUM_API,window.SP_REACT)};function ExecutePluginModule(){let e=window.MILLENNIUM_PLUGIN_SETTINGS_STORE[pluginName];e.OnPluginConfigChange=function(t,n,a){t in e.settingsStore&&(e.ignoreProxyFlag=!0,e.settingsStore[t]=a,e.ignoreProxyFlag=!1)},MILLENNIUM_BACKEND_IPC.postMessage(0,{pluginName:pluginName,methodName:"__builtins__.__millennium_plugin_settings_parser__"}).then(async t=>{"string"==typeof t.returnValue&&(e.ignoreProxyFlag=!0,e.settingsStore=e.DefinePluginSetting(Object.fromEntries(JSON.parse(atob(t.returnValue)).map(e=>[e.functionName,e]))),e.ignoreProxyFlag=!1);let n=PluginEntryPointMain();Object.assign(window.PLUGIN_LIST[pluginName],{...n,__millennium_internal_plugin_name_do_not_use_or_change__:pluginName});let a=await n.default();var r;a&&(r=a)&&void 0!==r.title&&void 0!==r.icon&&void 0!==r.content?(window.MILLENNIUM_SIDEBAR_NAVIGATION_PANELS[pluginName]=a,MILLENNIUM_BACKEND_IPC.postMessage(1,{pluginName:pluginName})):console.warn(`Plugin ${pluginName} does not contain proper SidebarNavigation props and therefor can't be mounted by Millennium. Please ensure it has a title, icon, and content.`)})}ExecutePluginModule();