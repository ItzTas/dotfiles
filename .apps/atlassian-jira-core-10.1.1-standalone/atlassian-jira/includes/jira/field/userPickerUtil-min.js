define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","wrm/context-path","jquery","underscore"],(function(e,r,t,n,a){"use strict";var i={reporter:"/rest/internal/2/users/reporter"},c={getUrl:function(e,r,n){if(r){if(!i[n])throw new Error("The URL for the ".concat(n," picker is not defined"));return"".concat(t()).concat(i[n])}return"".concat(t()).concat(e?"/rest/api/1.0/users/picker":"/rest/api/2/user/picker")},formatResponse:function(t){var a=[];n(t).each((function(t,i){var c=new r({weight:t,label:i.footer});n(i.users).each((function(){c.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,iconType:"rounded",allowDuplicate:!1,highlighted:!0,userKey:this.key}))}));a.push(c)}));return a},formatResponseWithoutHTML:function(e,r){var t={users:e.users.map((function(e){e.html=function(e,r){var t=new RegExp("\\b".concat(RegExp.escape(r)),"ig"),n=function(e){return e.replace(t,(function(e){return"<mark>".concat(e,"</mark>")}))},i=a.escape(e.displayName),c=a.escape(e.name),s=a.escape(e.emailAddress);return"".concat(n(i)).concat(e.emailAddress?" - ".concat(s):""," (").concat(n(c),")")}(e,r);return e}))};return c.formatResponse(t,r,!1)}};return c}));AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));