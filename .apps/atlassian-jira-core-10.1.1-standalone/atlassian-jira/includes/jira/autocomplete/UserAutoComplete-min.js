define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/field/create-user-picker-popup-trigger","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],(function(e,t,i,r,a,o,n,l){"use strict";var s=n(),u=s+"/rest/api/1.0/users/picker",c=function(t){var i=o.begetObject(e);i.getAjaxParams=function(){return{url:u,data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}};i.renderSuggestions=function(e){if(function(e){var t=!1,i=e.closest("form");i.length&&i.hasClass("submitting")&&(t=!0);return t}(this.field)||!r.isSelenium()&&!a.elementIsFocused(this.field))return!1;var t,o=[];this.clearResponseContainer();if(e&&e.users&&e.users.length>0){t=l("<ul/>").appendTo(this.responseContainer);l(e.users).each((function(){o.push([l("<li/>").html(this.html).appendTo(t),this.name])}))}e.footer&&this.responseContainer.append(l("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block"));if(o.length>0){i.addSuggestionControls(o);l(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})}return o};t.minQueryLength=2;t.queryDelay=.25;i.init(t);return i};c.init=function(e){l("fieldset.user-picker-params",e).each((function(){var r=t(l(this)),a=r.fieldId||r.fieldName,o=l(e).find("#"+a);!function(e,t){e.on("click",i.createUserPickerPopupTrigger({urlBase:s,formName:t.formName||e.closest("form").attr("name"),fieldName:t.fieldName,multiSelect:t.multiSelect,fieldConfigId:t.fieldConfigId,projectIds:t.projectId,actionToOpen:t.actionToOpen}))}(l("#"+a+"_container").find(".popup-trigger"),r);r.userPickerEnabled&&d(o,r)}))};function d(e,t){c({field:parent?e:null,fieldID:t.fieldName,fieldConfigID:t.fieldConfigId,projectId:t.projectId,delimChar:!1===t.multiSelect?void 0:",",ajaxData:{fieldName:t.fieldName}})}return c}));AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete"));AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));