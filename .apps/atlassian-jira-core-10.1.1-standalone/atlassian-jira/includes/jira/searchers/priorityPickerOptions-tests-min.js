AJS.test.require(["jira.webresources:searchers"],(function(){"use strict";var t=this,e=require("jira/util/formatter"),o=require("jira/searchers/element/priority-picker-options"),r=["test 1","test 2","3 test"],s={baseAjaxOptions:{maxResults:45,startAt:5}};module("priorityPickerOptions",{setup:function(){t.sandbox=sinon.sandbox.create();t.sandbox.stub(e,"format",(function(t){return t}));t.createPriority=function(t,e){return{id:e,iconUrl:"http://url/".concat(e),name:t,description:t}};t.createPriorities=function(e){return{values:r.map(t.createPriority),total:e||r.length}}},teardown:function(){t.sandbox.restore()}});test("should setup ajax options",(function(){var t=o(s);ok(t.ajaxOptions,"ajaxOptions defined");ok(t.ajaxOptions.url,"REST endpoint path defined");ok(t.ajaxOptions.data.maxResults>=1,"maxResults query param is set to equal or higher than 1");ok(!t.query,"Uses debouncing");ok("function"==typeof t.ajaxOptions.formatResponse,"formatResponse method defined")}));test("should keep input options",(function(){var t={test1:"test 1 option",test2:2,test3:!1},e=o(Object.assign(s,t));equal(e.test1,t.test1,"keep string property");equal(e.test2,t.test2,"keep numeric property");equal(e.test3,t.test3,"keep boolean property")}));test("should format response",(function(){var e=t.createPriorities(),r=o(s).ajaxOptions.formatResponse(e);e.values.forEach((function(t){return ok(r[0].items().some((function(e){return e.value()===t.id&&e.label()===t.name})),"should format response for priority id:".concat(t.id,", name:").concat(t.name))}));ok(!0===r[0].fetchedThroughAjaxCall(),"marked as ajax call response")}));test("should include footer text when number of priorities returned was trimmed",(function(){var e=t.createPriorities(5),r=o(s).ajaxOptions.formatResponse(e);ok("common.concepts.too.many.matches"===r[0].footerText(),"footer text is set with proper translation key")}));test("should omit footer text when all projects were returned",(function(){var e=t.createPriorities(),r=o(s).ajaxOptions.formatResponse(e);ok(!r[0].footerText(),"footer text is not set")}))}));