function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);return"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=new Array(a);t<a;t++)r[t]=e[t];return r}function _iterableToArrayLimit(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,s,i,g,n=[],d=!0,o=!1;try{if(i=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;d=!1}else for(;!(d=(r=i.call(t)).done)&&(n.push(r.value),n.length!==a);d=!0);}catch(e){o=!0,s=e}finally{try{if(!d&&null!=t.return&&(g=t.return(),Object(g)!==g))return}finally{if(o)throw s}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(){"use strict";var e,a=require("internal/browser-metrics"),t=require("jquery"),r=require("jira/jquery/deferred"),s="jira.dashboard",i=1e4,g="loaded",n="timeout",d=/\/plugins\/servlet\/gadgets\/ifr\?/,o=/^(?:[^:]+:)?[./]*[^/:#?]+/,l={"jira-dashboard-items/assigned-to-me":"gadget.jira.assigned.to.me","jira-dashboard-items/bubble-chart-dashboard-item":"gadget.jira.bubble.chart","jira-dashboard-items/createdvsresolved":"gadget.jira.created.resolved","jira-dashboard-items/favourite-filters":"gadget.jira.favourite.filters","jira-dashboard-items/filter-results":"gadget.jira.filter.results","jira-dashboard-items/in-progress":"gadget.jira.in.progress","jira-dashboard-items/labels":"gadget.jira.labels","jira-dashboard-items/piechart":"gadget.jira.piechart","jira-dashboard-items/sprint-days-remaining":"gadget.jira.sprint.days","jira-dashboard-items/sprint-health":"gadget.jira.sprint.health","jira-dashboard-items/stats":"gadget.jira.stats","jira-dashboard-items/two-dimensional-stats":"gadget.jira.two.dimensional.stats","jira-dashboard-items/voted":"gadget.jira.voted","jira-dashboard-items/watched":"gadget.jira.watched","rest/gadgets/1.0/g/com.atlassian.bonfire.plugin:bonfire-test-sessions-gadget/gadget/bonfire-sessions-gadget.xml":"gadget.rest.bonfire.sessions","rest/gadgets/1.0/g/com.atlassian.jira.ext.calendar:issuescalendar-gadget/templates/plugins/jira/portlets/calendar/gadget/calendar-gadget.xml":"gadget.rest.jiraext.issues.calendar","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:firstresponse-gadget/com/atlassian/jira/ext/charting/gadget/firstresponse-gadget.xml":"gadget.rest.jiraext.first.response","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:numberoftimesinstatus-gadget/com/atlassian/jira/ext/charting/gadget/numberoftimesinstatus-gadget.xml":"gadget.rest.jiraext.times.in.status","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:timeinstatus-gadget/com/atlassian/jira/ext/charting/gadget/timeinstatus-gadget.xml":"gadget.rest.jiraext.issues.calendar.time.in.status","rest/gadgets/1.0/g/com.atlassian.jira.ext.charting:workloadpie-gadget/com/atlassian/jira/ext/charting/gadget/workloadpie-gadget.xml":"gadget.rest.jiraext.workload","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:average-age-chart-gadget/gadgets/average-age-gadget.xml":"gadget.rest.jira.average.age","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:heat-map-gadget/gadgets/heatmap-gadget.xml":"gadget.rest.jira.heat.map","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:project-gadget/gadgets/project-gadget.xml":"gadget.rest.jira.project","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:recently-created-chart-gadget/gadgets/recently-created-gadget.xml":"gadget.rest.jira.recently.created","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:resolution-time-gadget/gadgets/resolution-time-gadget.xml":"gadget.rest.jira.resolution.time","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:road-map-gadget/gadgets/roadmap-gadget.xml":"gadget.rest.jira.roadmap","rest/gadgets/1.0/g/com.atlassian.jira.gadgets:time-since-chart-gadget/gadgets/timesince-gadget.xml":"gadget.rest.jira.timesince","rest/gadgets/1.0/g/com.atlassian.jirafisheyeplugin:crucible-charting-gadget/gadgets/crucible-charting-gadget.xml":"gadget.rest.crucible.charting","rest/gadgets/1.0/g/com.atlassian.jirafisheyeplugin:fisheye-charting-gadget/gadgets/fisheye-charting-gadget.xml":"gadget.rest.fisheye.charting","rest/gadgets/1.0/g/com.atlassian.jirafisheyeplugin:fisheye-recent-commits-gadget/gadgets/fisheye-recent-commits-gadget.xml":"gadget.rest.fisheye.recent","rest/gadgets/1.0/g/com.atlassian.jirawallboard.atlassian-wallboard-plugin:spacer-gadget/gadgets/spacerGadget.xml":"gadget.rest.wallboard.spacer","rest/gadgets/1.0/g/com.atlassian.streams.streams-jira-plugin:activitystream-gadget/gadgets/activitystream-gadget.xml":"gadget.rest.wallboard.spacer","rest/gadgets/1.0/g/com.pyxis.greenhopper.jira:greenhopper-gadget-rapid-view/gadgets/greenhopper-rapid-view.xml":"gadget.rest.greenhopper.rapid.view","rest/gadgets/1.0/g/com.pyxis.greenhopper.jira:greenhopper-gadget-sprint-burndown/gadgets/greenhopper-sprint-burndown.xml":"gadget.rest.greenhopper.sprint.burndown","rest/gadgets/1.0/g/com.pyxis.greenhopper.jira:greenhopper-gadget-version-report/gadgets/greenhopper-version-report.xml":"gadget.rest.greenhopper.version"};function c(e,a,t){(a.loadingPromises||[]).forEach((function(a){a.resolve({src:e,status:t})}));a.loadingPromises=[]}var u=function(){if(e)return e;var a={};f().filter((function(e){return d.test(e.renderedGadgetUrl)})).forEach((function(e){a[h(e.renderedGadgetUrl)]={key:"jira.gadgets.iframe",specId:e.gadgetSpecUrl,loadingPromises:[],renderedMark:null}}));e=a;return a};function m(e){var a=e.map((function(e){return function(e){var a=r(),s=u()[h(e.src)];if(s){s.loadingPromises.push(a);s.isOnLoadMarked&&c(e.src,s,g)}else if(window.document&&"complete"===window.document.readyState)a.resolve({src:e.src,status:g});else{var d,o=function r(s){clearTimeout(d);t(window).off("load",r);a.resolve({src:e.src,status:s})};d=setTimeout((function(){o(n)}),i);t(window).on("load",(function(){o(g)}))}return a}(e)}));return t.when.apply(t,a)}function p(){var e=t.Deferred();t((function(){var a=t("#dashboard");0===a.length&&e.reject();if(a.hasClass("initializing")){a.on("initialized",(function t(){a.off("initialized",t);e.resolve()}))}else e.resolve()}));return e.promise()}function f(){var e,a=t("dashboard")[0];try{e=JSON.parse(a.getAttribute("layouts")).layouts}catch(e){return{}}var r=e.filter((function(e){return e.active}))[0];return r&&r.gadgets&&r.gadgets.length?r.gadgets:{}}function h(e){return"string"==typeof e?e.replace(/#[^#]*$/,""):e}var j,b=function(e,a){if(a){var t=u()[h(a.gadgetUrl)];if(t){t.isOnLoadMarked=!0;t.loadingPromises.length>0&&c(a.gadgetUrl,t,g)}}},y=function(){for(var e=0,a=Object.entries(u());e<a.length;e++){var t=_slicedToArray(a[e],2),r=t[0],s=t[1];s&&s.loadingPromises.length>0&&c(r,s,n)}};t(document).on("gadget-loaded",b);p().then((function(){j=setTimeout(y,i)}));function v(e){if(!e||/^\s+$/.test(e))return"[empty]";var a=u()[h(e)];if(a)return a.specId;var t=o.exec(e);return t?t[0]:"[masked]"}var x,w=p(),A=[];w.pipe((function(){performance&&(x=Math.round(performance.now()))}));A.push((function(){return"number"==typeof x?{dashboardInitialized:x}:{}}));function k(e){a.end({key:s,reporters:A.concat((function(){var e=f().map((function(e){return(a=e.amdModule||e.gadgetSpecUrl,l[a])||"gadget.unknown";var a})).reduce((function(e,a){e.hasOwnProperty(a)?e[a]+=1:e[a]=1;return e}),{});return e}))});j&&clearTimeout(j);t(document).off("gadget-loaded",b);for(var r=0,i=Object.entries(e);r<i.length;r++){var g=_slicedToArray(i[r],2)[1];g.status===n&&console.log("dashboard.metrics","iframe onload timed out: "+v(g.src))}}w.pipe((function(){e=t("meta[name=ajs-dashboard-id]").attr("content"),a.start({key:s,isInitial:!0,entityId:e});var e;return m(t("#dashboard").find(".dashboard-item-content").find("iframe[src!='about:blank']").get())})).done((function(){k(arguments)}))}();